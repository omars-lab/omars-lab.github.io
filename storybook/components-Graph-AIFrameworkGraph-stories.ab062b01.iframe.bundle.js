"use strict";(globalThis.webpackChunkbytesofpurpose_blog=globalThis.webpackChunkbytesofpurpose_blog||[]).push([[307],{"./src/components/Graph/AIFrameworkGraph.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,EmptyState:()=>EmptyState,SingleTechnology:()=>SingleTechnology,WithMultipleTechnologies:()=>WithMultipleTechnologies,__namedExportsOrder:()=>__namedExportsOrder,default:()=>AIFrameworkGraph_stories});var react=__webpack_require__("./node_modules/react/index.js"),BrowserOnlyMock=__webpack_require__("./src/stories/mocks/BrowserOnlyMock.tsx"),theme_common_mock=__webpack_require__("./src/stories/mocks/theme-common-mock.ts"),GraphRenderer_module=__webpack_require__("./src/components/Graph/GraphRenderer.module.css");function findPathToNode(targetId,nodes,path=[]){for(const node of nodes){const currentPath=[...path,node.id];if(node.id===targetId)return currentPath;if(node.children){const found=findPathToNode(targetId,node.children,currentPath);if(found)return found}}return null}function findNodeById(targetId,nodes){for(const node of nodes){if(node.id===targetId)return node;if(node.children){const found=findNodeById(targetId,node.children);if(found)return found}}return null}function cleanNodeForSelection(node){return{id:node.id,name:node.name,title:node.title,label:node.label,description:"string"==typeof node.description?node.description:"",group:node.group,color:node.color,hasChildren:node.hasChildren,isExpanded:node.isExpanded,markdownSection:node.markdownSection,keyLinks:node.keyLinks}}var GraphNodeUtils=__webpack_require__("./src/components/Graph/GraphNodeUtils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const NEO4J_COLORS=["#68BDF6","#60BE86","#FF6B6B","#FFD93D","#A78BFA","#FB7185","#34D399","#FBBF24"],GraphRendererImpl=({data,width=800,height=600,highlightNodeId:propHighlightNodeId,highlightEdgeId:propHighlightEdgeId,graphId="graph",onEdgeClick,initialExpandedNodes,ForceGraph2D,d3,NodeRenderer})=>{const graphRef=(0,react.useRef)(null),createNodeRenderer=(0,react.useCallback)((isDarkMode,highlightedNodeId,selectedNode,nodeBorderColor,expandedNodes)=>(node,ctx,globalScale)=>{node.isExpanded=expandedNodes.has(node.id);new NodeRenderer({ctx,node,globalScale,isDarkMode,isHighlighted:highlightedNodeId===node.id,isSelected:selectedNode?.id===node.id,nodeBorderColor,showDebugSeparators:false}).render()},[]),cleanEdgeForSelection=(0,react.useCallback)(link=>{const sourceId="string"==typeof link.source?link.source:link.source?.id||String(link.source),targetId="string"==typeof link.target?link.target:link.target?.id||String(link.target);return{id:link.id,source:sourceId,target:targetId,label:link.label,value:link.value,type:link.type,markdownSection:link.markdownSection,similarities:link.similarities,differences:link.differences,sourceData:link.sourceData,targetData:link.targetData}},[]),getEdgeWidth=(0,react.useCallback)((link,isHighlighted)=>{const baseWidth=Math.max(2,2*Math.sqrt(link.value||1));return isHighlighted?1.5*baseWidth:baseWidth},[]),getEdgeCoordinates=(0,react.useCallback)((link,startNode,endNode,getNodeRadiusFn)=>function GraphRenderingUtils_getEdgeCoordinates(startNode,endNode,getNodeRadius){if(!(startNode&&endNode&&void 0!==startNode.x&&void 0!==startNode.y&&void 0!==endNode.x&&void 0!==endNode.y&&isFinite(startNode.x)&&isFinite(startNode.y)&&isFinite(endNode.x)&&isFinite(endNode.y)))return null;const sourceRadius=getNodeRadius(startNode.hasChildren),targetRadius=getNodeRadius(endNode.hasChildren),dx=endNode.x-startNode.x,dy=endNode.y-startNode.y,distance=Math.sqrt(dx*dx+dy*dy);if(0===distance)return null;const unitX=dx/distance,unitY=dy/distance,startX=startNode.x+unitX*sourceRadius,startY=startNode.y+unitY*sourceRadius,endX=endNode.x-unitX*targetRadius,endY=endNode.y-unitY*targetRadius;return{startX,startY,endX,endY,midX:(startX+endX)/2,midY:(startY+endY)/2}}(startNode,endNode,getNodeRadiusFn),[]),drawComparisonEdge=(0,react.useCallback)((ctx,startX,startY,endX,endY,isHighlighted,isDarkMode,linkWidth)=>{ctx.save(),ctx.setLineDash([12,8]),ctx.lineWidth=.6*linkWidth,ctx.strokeStyle=isHighlighted?isDarkMode?"#FFD700":"#FFA500":isDarkMode?"#CCCCCC":"#BBBBBB",ctx.lineCap="round",ctx.lineJoin="round",ctx.globalAlpha=1,ctx.beginPath(),ctx.moveTo(startX,startY),ctx.lineTo(endX,endY),ctx.stroke(),ctx.restore()},[]),drawEdgeLabel=(0,react.useCallback)((ctx,label,midX,midY,globalScale,isHighlighted,isDarkMode)=>{const fontSize=10/globalScale;ctx.font=`${fontSize}px Sans-Serif`;const textWidth=ctx.measureText(label).width,padding=4/globalScale;ctx.fillStyle=isHighlighted?"rgba(255, 215, 0, 0.9)":isDarkMode?"rgba(30, 30, 30, 0.9)":"rgba(255, 255, 255, 0.9)",ctx.fillRect(midX-textWidth/2-padding,midY-fontSize/2-padding,textWidth+2*padding,fontSize+2*padding),ctx.fillStyle=isHighlighted?"#000000":isDarkMode?"#ffffff":"#1a1a1a",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(label,midX,midY)},[]),isAdjustingZoomRef=(0,react.useRef)(!1),previousZoomRef=(0,react.useRef)(1),[expandedNodes,setExpandedNodes]=(0,react.useState)(initialExpandedNodes||new Set),[selectedNode,setSelectedNode]=(0,react.useState)(null),[selectedEdge,setSelectedEdge]=(0,react.useState)(null),[highlightedNodeId,setHighlightedNodeId]=(0,react.useState)(null),[highlightedEdgeId,setHighlightedEdgeId]=(0,react.useState)(null),[paneVisible,setPaneVisible]=(0,react.useState)(!0),[isMobile,setIsMobile]=(0,react.useState)(!1),[containerDimensions,setContainerDimensions]=(0,react.useState)({width,height});(0,react.useEffect)(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768)};return checkMobile(),window.addEventListener("resize",checkMobile),()=>window.removeEventListener("resize",checkMobile)},[]),(0,react.useEffect)(()=>{setContainerDimensions({width,height})},[width,height]);const[contextMenu,setContextMenu]=(0,react.useState)(null),rightClickPositionRef=(0,react.useRef)(null),[nodePositions,setNodePositions]=(0,react.useState)(new Map),[rightClickMenu,setRightClickMenu]=(0,react.useState)(null),{colorMode}=(0,theme_common_mock.G)(),isDarkMode="dark"===colorMode,flattenNodes=(0,react.useCallback)((nodes,expanded)=>{const flattenedNodes=[],flattenedLinks=[],nodeMap=new Map,processNode=(node,index,parentId)=>{const{children,...nodeProps}=node,nodeData={...nodeProps,id:node.id,name:node.label,title:node.title||node.label,description:"string"==typeof node.description?node.description:node.description?.toString?.()||"",group:node.group??index%NEO4J_COLORS.length,color:node.color??NEO4J_COLORS[index%NEO4J_COLORS.length],hasChildren:node.children&&node.children.length>0,isExpanded:expanded.has(node.id),originalNode:node};flattenedNodes.push(nodeData),nodeMap.set(node.id,nodeData),parentId&&flattenedLinks.push({source:parentId,target:node.id,value:1,id:`${parentId}-${node.id}`}),node.children&&expanded.has(node.id)&&node.children.forEach((child,childIndex)=>{processNode(child,childIndex,node.id)})};return nodes.forEach((node,index)=>{processNode(node,index)}),data.links.forEach((link,index)=>{flattenedLinks.push({...link,source:link.source,target:link.target,value:link.value??1,id:link.id||`${link.source}-${link.target}-${index}`})}),{nodes:flattenedNodes,links:flattenedLinks}},[data]),graphData=(0,react.useMemo)(()=>flattenNodes(data.nodes,expandedNodes),[data,expandedNodes,flattenNodes]),getNodesFromLink=(0,react.useCallback)(link=>{const sourceId="string"==typeof link.source?link.source:link.source?.id,targetId="string"==typeof link.target?link.target:link.target?.id;return{startNode:graphData.nodes.find(n=>n.id===sourceId),endNode:graphData.nodes.find(n=>n.id===targetId)}},[graphData.nodes]),toggleNodeExpansion=(0,react.useCallback)(nodeId=>{setExpandedNodes(prev=>{const newSet=new Set(prev);return newSet.has(nodeId)?newSet.delete(nodeId):newSet.add(nodeId),newSet})},[]),getAllNodesWithChildrenWrapper=(0,react.useCallback)(()=>function getAllNodesWithChildren(nodes){const nodesWithChildren=new Set,traverse=nodeList=>{nodeList.forEach(node=>{node.children&&node.children.length>0&&(nodesWithChildren.add(node.id),traverse(node.children))})};return traverse(nodes),nodesWithChildren}(data.nodes),[data]),expandAll=(0,react.useCallback)(()=>{const allNodesWithChildren=getAllNodesWithChildrenWrapper();setExpandedNodes(allNodesWithChildren)},[getAllNodesWithChildrenWrapper]),collapseAll=(0,react.useCallback)(()=>{setExpandedNodes(new Set),setSelectedEdge(null),setSelectedNode(null),setHighlightedEdgeId(null),setHighlightedNodeId(null)},[]),updateNodePositions=(0,react.useCallback)(()=>{if(!graphRef.current)return;if(!graphData||!graphData.nodes)return;const canvas=document.querySelector("canvas")||null;if(!canvas)return;const containerRect=canvas.getBoundingClientRect(),zoom=graphRef.current?.zoom?.()||1,positions=new Map;graphData.nodes.forEach(node=>{if(void 0!==node.x&&void 0!==node.y&&isFinite(node.x)&&isFinite(node.y)){const screenX=containerRect.width/2+node.x*zoom,screenY=containerRect.height/2+node.y*zoom,radius=(0,GraphNodeUtils.bf)(node.hasChildren)*zoom;positions.set(node.id,{x:screenX,y:screenY,radius})}}),setNodePositions(prevPositions=>{if(prevPositions.size!==positions.size)return positions;for(const[id,pos]of positions.entries()){const prevPos=prevPositions.get(id);if(!prevPos||Math.abs(prevPos.x-pos.x)>.1||Math.abs(prevPos.y-pos.y)>.1||Math.abs(prevPos.radius-pos.radius)>.1)return positions}return prevPositions})},[graphData,GraphNodeUtils.bf]),isUpdatingPositionsRef=(0,react.useRef)(!1),previousGraphDataNodesLengthForPositionsRef=(0,react.useRef)(0);(0,react.useEffect)(()=>{if(!graphRef.current||!graphData||!graphData.nodes.length)return;if(previousGraphDataNodesLengthForPositionsRef.current===graphData.nodes.length&&isUpdatingPositionsRef.current)return;if(previousGraphDataNodesLengthForPositionsRef.current=graphData.nodes.length,isUpdatingPositionsRef.current)return;let animationFrameId;isUpdatingPositionsRef.current=!0;let lastUpdateTime=0;const updatePositions=currentTime=>{currentTime-lastUpdateTime>=100&&(updateNodePositions(),lastUpdateTime=currentTime),animationFrameId=requestAnimationFrame(updatePositions)};return animationFrameId=requestAnimationFrame(updatePositions),()=>{animationFrameId&&cancelAnimationFrame(animationFrameId),isUpdatingPositionsRef.current=!1}},[graphData.nodes.length,updateNodePositions]);const autoCenter=(0,react.useCallback)(()=>{if(graphRef.current&&graphData.nodes.length>0){let minX=1/0,maxX=-1/0,minY=1/0,maxY=-1/0;if(graphData.nodes.forEach(node=>{void 0!==node.x&&void 0!==node.y&&(minX=Math.min(minX,node.x),maxX=Math.max(maxX,node.x),minY=Math.min(minY,node.y),maxY=Math.max(maxY,node.y))}),minX!==1/0){const centerX=(minX+maxX)/2,centerY=(minY+maxY)/2;setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(graphRef.current){const graphInstance=graphRef.current;graphInstance?.centerAt?.(centerX,centerY,1e3)}})})},isMobile?200:0)}}},[graphData,isMobile,paneVisible]),togglePane=(0,react.useCallback)(()=>{setPaneVisible(prev=>!prev)},[]),copyAnchorLink=(0,react.useCallback)(async(nodeId,edgeId)=>{let anchorLink;if(nodeId)anchorLink=`${window.location.origin}${window.location.pathname}#${graphId}-node-${nodeId}`;else{if(!edgeId)return;anchorLink=`${window.location.origin}${window.location.pathname}#${graphId}-edge-${edgeId}`}try{await navigator.clipboard.writeText(anchorLink),setContextMenu(null)}catch(err){console.error("Failed to copy link:",err);const textArea=document.createElement("textarea");textArea.value=anchorLink,textArea.style.position="fixed",textArea.style.opacity="0",document.body.appendChild(textArea),textArea.select();try{document.execCommand("copy"),setContextMenu(null)}catch(fallbackErr){console.error("Fallback copy failed:",fallbackErr)}document.body.removeChild(textArea)}},[graphId]);(0,react.useEffect)(()=>{const handleClickOutside=event=>{rightClickMenu&&setRightClickMenu(null),contextMenu&&setContextMenu(null)};return(rightClickMenu||contextMenu)&&(document.addEventListener("click",handleClickOutside),document.addEventListener("contextmenu",handleClickOutside)),()=>{document.removeEventListener("click",handleClickOutside),document.removeEventListener("contextmenu",handleClickOutside)}},[rightClickMenu,contextMenu]);const highlightNode=(0,react.useCallback)((nodeId,scrollToGraph=!1)=>{if(!nodeId)return;if(!graphData.nodes.some(n=>n.id===nodeId)){if(!findPathToNode(nodeId,data.nodes))return void 0}scrollToGraph&&outerContainerRef.current&&outerContainerRef.current.scrollIntoView({behavior:"smooth",block:"center"});const path=findPathToNode(nodeId,data.nodes);if(!path)return void setHighlightedNodeId(nodeId);const parentsToExpand=path.slice(0,-1),node=findNodeById(nodeId,data.nodes);setExpandedNodes(prev=>{const newSet=new Set(prev);return parentsToExpand.forEach(parentId=>newSet.add(parentId)),scrollToGraph&&node&&node.children&&node.children.length>0&&newSet.add(nodeId),newSet}),setHighlightedNodeId(nodeId),scrollToGraph&&node&&setSelectedNode(cleanNodeForSelection(node))},[data.nodes,graphData.nodes,findPathToNode,findNodeById,cleanNodeForSelection]),highlightEdge=(0,react.useCallback)((edgeId,scrollToGraph=!1)=>{if(!edgeId)return;graphData.links.find(l=>l.id===edgeId)?(scrollToGraph&&outerContainerRef.current&&outerContainerRef.current.scrollIntoView({behavior:"smooth",block:"center"}),setHighlightedEdgeId(edgeId)):console.warn(`Edge not found: ${edgeId} (source/target nodes may be collapsed)`)},[graphData]),highlightNodeRef=(0,react.useRef)(highlightNode),highlightEdgeRef=(0,react.useRef)(highlightEdge);(0,react.useEffect)(()=>{highlightNodeRef.current=highlightNode,highlightEdgeRef.current=highlightEdge},[highlightNode,highlightEdge]);const graphDataRef=(0,react.useRef)(graphData);(0,react.useEffect)(()=>{graphDataRef.current=graphData},[graphData]),(0,react.useEffect)(()=>{const handleMarkdownSectionClick=e=>{let element=e.target,nodeId=null,edgeId=null;for(;element&&element!==document.body;){if(element.dataset.graphNode){nodeId=element.dataset.graphNode;break}if(element.dataset.graphEdge){edgeId=element.dataset.graphEdge;break}element=element.parentElement}if(nodeId)e.preventDefault(),highlightNodeRef.current(nodeId,!0),graphId&&(window.location.hash=`#${graphId}-node-${nodeId}`);else if(edgeId){e.preventDefault();const edge=graphDataRef.current.links.find(l=>l.id===edgeId);edge&&(highlightEdgeRef.current(edgeId,!0),setSelectedEdge(cleanEdgeForSelection(edge)),setSelectedNode(null),graphId&&(window.location.hash=`#${graphId}-edge-${edgeId}`))}};return document.addEventListener("click",handleMarkdownSectionClick,!0),()=>{document.removeEventListener("click",handleMarkdownSectionClick,!0)}},[graphId,setSelectedEdge,setSelectedNode]),(0,react.useEffect)(()=>{const nodeHashPrefix=`#${graphId}-node-`,edgeHashPrefix=`#${graphId}-edge-`,checkHash=()=>{const hash=window.location.hash;if(hash.startsWith(nodeHashPrefix)){const nodeId=hash.substring(nodeHashPrefix.length);highlightNodeRef.current(nodeId,!0)}else if(hash.startsWith(edgeHashPrefix)){const edgeId=hash.substring(edgeHashPrefix.length),edge=graphDataRef.current.links.find(l=>l.id===edgeId);edge&&(highlightEdgeRef.current(edgeId,!0),setSelectedEdge(cleanEdgeForSelection(edge)),setSelectedNode(null))}};return checkHash(),window.addEventListener("hashchange",checkHash),()=>{window.removeEventListener("hashchange",checkHash)}},[graphId,cleanEdgeForSelection,setSelectedEdge,setSelectedNode]),(0,react.useEffect)(()=>{propHighlightNodeId&&highlightNodeRef.current(propHighlightNodeId)},[propHighlightNodeId]),(0,react.useEffect)(()=>{propHighlightEdgeId&&highlightEdgeRef.current(propHighlightEdgeId)},[propHighlightEdgeId]);const previousHighlightedNodeIdRef=(0,react.useRef)(null),previousGraphDataNodesLengthRef=(0,react.useRef)(0);(0,react.useEffect)(()=>{const nodeIdChanged=previousHighlightedNodeIdRef.current!==highlightedNodeId,nodesCountChanged=previousGraphDataNodesLengthRef.current!==graphData.nodes.length;if((nodeIdChanged||nodesCountChanged)&&(previousHighlightedNodeIdRef.current=highlightedNodeId,previousGraphDataNodesLengthRef.current=graphData.nodes.length,highlightedNodeId&&graphRef.current&&graphData.nodes.length>0)){const attemptCenter=(attempts=0)=>{attempts>30||setTimeout(()=>{if(graphRef.current){const node=graphData.nodes.find(n=>n.id===highlightedNodeId);if(node&&void 0!==node.x&&void 0!==node.y&&isFinite(node.x)&&isFinite(node.y)){setTimeout(()=>{requestAnimationFrame(()=>{graphRef.current&&(graphRef.current?.centerAt?.(node.x,node.y,1e3),graphRef.current?.zoom?.(1.5,1e3))})},isMobile?300:0),setSelectedNode(cleanNodeForSelection(node))}else attemptCenter(attempts+1)}},100)};attemptCenter()}},[highlightedNodeId,graphData.nodes.length,cleanNodeForSelection,isMobile]),(0,react.useEffect)(()=>{if(graphRef.current&&isMobile){const graphInstance=graphRef.current;setTimeout(()=>{const canvas=graphInstance?.canvas?.();if(canvas){canvas.offsetWidth||canvas.width,canvas.offsetHeight||canvas.height}},100)}},[isMobile]);const calculateNodeBoundingBox=(0,react.useCallback)(()=>{if(!graphRef.current)return null;if(!graphData||!graphData.nodes||0===graphData.nodes.length)return null;let minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,validNodes=0;return graphData.nodes.forEach(node=>{if(void 0!==node.x&&void 0!==node.y&&isFinite(node.x)&&isFinite(node.y)){const nodeRadius=(0,GraphNodeUtils.bf)(node.hasChildren);minX=Math.min(minX,node.x-nodeRadius),minY=Math.min(minY,node.y-nodeRadius),maxX=Math.max(maxX,node.x+nodeRadius),maxY=Math.max(maxY,node.y+nodeRadius),validNodes++}}),0===validNodes?null:{minX,minY,maxX,maxY,width:maxX-minX,height:maxY-minY,centerX:(minX+maxX)/2,centerY:(minY+maxY)/2}},[]),canZoomOut=(0,react.useCallback)(newZoom=>{if(!graphRef.current)return!0;const bbox=calculateNodeBoundingBox();if(!bbox)return!0;const containerElement=outerContainerRef.current?.parentElement;if(!containerElement)return!0;const actualWidth=containerElement.offsetWidth||width,graphWidth=actualWidth-(isMobile?0:paneVisible?Math.floor(.2*actualWidth):0),graphHeight=actualHeight-40;return bbox.width*newZoom*(bbox.height*newZoom)/(graphWidth*graphHeight)*100>=10},[calculateNodeBoundingBox,width,height,paneVisible,isMobile]),canZoomIn=(0,react.useCallback)(newZoom=>{if(!graphRef.current)return!0;if(!graphData||!graphData.nodes||graphData.nodes.length<=1)return!0;const containerElement=outerContainerRef.current?.parentElement;if(!containerElement)return!0;const actualWidth=containerElement.offsetWidth||width,graphWidth=actualWidth-(isMobile?0:paneVisible?Math.floor(.2*actualWidth):0),graphHeight=actualHeight-40,viewportGraphWidth=graphWidth/newZoom,viewportGraphHeight=graphHeight/newZoom;let centerX,centerY;if(graphRef.current?.screen2GraphCoords){const center=graphRef.current.screen2GraphCoords(graphWidth/2,graphHeight/2);centerX=center.x,centerY=center.y}else{const bbox=calculateNodeBoundingBox();if(!bbox)return!0;centerX=bbox.centerX,centerY=bbox.centerY}const halfWidth=viewportGraphWidth/2,halfHeight=viewportGraphHeight/2;let maxNodeSizeInGraph=0;graphData.nodes.forEach(node=>{if(void 0!==node.x&&void 0!==node.y&&isFinite(node.x)&&isFinite(node.y)){const nodeDiameter=2*(0,GraphNodeUtils.bf)(node.hasChildren);maxNodeSizeInGraph=Math.max(maxNodeSizeInGraph,nodeDiameter)}});let maxNodeSizeInViewport=0;graphData.nodes.forEach(node=>{if(void 0!==node.x&&void 0!==node.y&&isFinite(node.x)&&isFinite(node.y)){const nodeRadius=(0,GraphNodeUtils.bf)(node.hasChildren),nodeDiameter=2*nodeRadius,padding=.5*nodeRadius;node.x-nodeRadius-padding>=centerX-halfWidth&&node.x+nodeRadius+padding<=centerX+halfWidth&&node.y-nodeRadius-padding>=centerY-halfHeight&&node.y+nodeRadius+padding<=centerY+halfHeight&&(maxNodeSizeInViewport=Math.max(maxNodeSizeInViewport,nodeDiameter))}});const maxNodeSize=maxNodeSizeInViewport>0?maxNodeSizeInViewport:maxNodeSizeInGraph;if(maxNodeSize>0){if(maxNodeSize*newZoom/Math.min(graphWidth,graphHeight)*100>=90)return!1}return!(Math.min(viewportGraphWidth,viewportGraphHeight)<(maxNodeSizeInGraph>0?3*maxNodeSizeInGraph:50))},[calculateNodeBoundingBox,width,height,paneVisible,isMobile]),backgroundColor=isDarkMode?"#1e1e1e":"#ffffff",linkColor=isDarkMode?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.8)",arrowColor=isDarkMode?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.8)",nodeBorderColor=isDarkMode?"#ffffff":"#333333",outerContainerRef=(0,react.useRef)(null),[actualContainerWidth,setActualContainerWidth]=(0,react.useState)(width);(0,react.useEffect)(()=>{if(outerContainerRef.current){const containerWidth=outerContainerRef.current.offsetWidth||width;setActualContainerWidth(containerWidth)}else setActualContainerWidth(width)},[isMobile,width,paneVisible]);const actualWidth=actualContainerWidth,actualHeight=height,graphWidth=actualWidth-(isMobile?0:paneVisible?Math.floor(.2*actualWidth):0),memoizedGraphData=(0,react.useMemo)(()=>graphData,[graphData]),handleNodeClick=(0,react.useCallback)(node=>{setContextMenu(null),highlightedEdgeId&&setHighlightedEdgeId(null),selectedEdge&&setSelectedEdge(null);const isAlreadySelected=selectedNode?.id===node.id;setHighlightedNodeId(node.id),graphId&&(window.location.hash=`#${graphId}-node-${node.id}`),isAlreadySelected&&node.hasChildren?toggleNodeExpansion(node.id):!isAlreadySelected&&node.hasChildren&&setExpandedNodes(prev=>{const newSet=new Set(prev);return newSet.add(node.id),newSet}),setSelectedNode(cleanNodeForSelection(node)),setSelectedEdge(null)},[highlightedEdgeId,selectedEdge,selectedNode,graphId,toggleNodeExpansion,setExpandedNodes,cleanNodeForSelection]),handleNodeRightClick=(0,react.useCallback)(node=>{rightClickPositionRef.current&&(setRightClickMenu({nodeId:node.id,x:rightClickPositionRef.current.x,y:rightClickPositionRef.current.y}),rightClickPositionRef.current=null)},[]),handleLinkClick=(0,react.useCallback)(link=>{setRightClickMenu(null),setContextMenu(null),highlightedEdgeId&&highlightedEdgeId!==link.id&&setHighlightedEdgeId(null),highlightedNodeId&&setHighlightedNodeId(null),setSelectedEdge(cleanEdgeForSelection(link)),setSelectedNode(null),graphId&&link.id&&(window.location.hash=`#${graphId}-edge-${link.id}`),onEdgeClick&&onEdgeClick(link)},[highlightedEdgeId,highlightedNodeId,graphId,onEdgeClick,cleanEdgeForSelection]),handleLinkRightClick=(0,react.useCallback)(link=>{rightClickPositionRef.current&&(setContextMenu({x:rightClickPositionRef.current.x,y:rightClickPositionRef.current.y,edgeId:link.id,nodeId:void 0}),rightClickPositionRef.current=null)},[]),handleNodeDrag=(0,react.useCallback)(node=>{updateNodePositions()},[updateNodePositions]),handleNodeDragEnd=(0,react.useCallback)(node=>{updateNodePositions()},[updateNodePositions]),handleZoom=(0,react.useCallback)(transform=>{if(requestAnimationFrame(()=>{updateNodePositions()}),!graphRef.current||isAdjustingZoomRef.current)return void(previousZoomRef.current=transform.k);const newZoom=transform.k,previousZoom=previousZoomRef.current;if(newZoom<previousZoom){if(!canZoomOut(newZoom))return isAdjustingZoomRef.current=!0,graphRef.current?.zoom?.(previousZoom,0),void setTimeout(()=>{isAdjustingZoomRef.current=!1},10)}else if(newZoom>previousZoom&&!canZoomIn(newZoom))return isAdjustingZoomRef.current=!0,graphRef.current?.zoom?.(previousZoom,0),void setTimeout(()=>{isAdjustingZoomRef.current=!1},10);previousZoomRef.current=newZoom},[updateNodePositions,canZoomOut,canZoomIn]),nodeCanvasObject=(0,react.useMemo)(()=>createNodeRenderer(isDarkMode,highlightedNodeId,selectedNode,nodeBorderColor,expandedNodes),[createNodeRenderer,isDarkMode,highlightedNodeId,selectedNode,nodeBorderColor,expandedNodes]),linkCanvasObjectMode=(0,react.useCallback)(link=>"differentiating"===link.type?"replace":"after",[]),linkCanvasObject=(0,react.useCallback)((link,ctx,globalScale)=>{const isHighlighted=highlightedEdgeId===link.id,isComparisonEdge="differentiating"===link.type;if(isComparisonEdge&&link.source&&link.target){const{startNode,endNode}=getNodesFromLink(link),coords=getEdgeCoordinates(link,startNode,endNode,GraphNodeUtils.bf);if(coords){const linkWidth=getEdgeWidth(link,isHighlighted);drawComparisonEdge(ctx,coords.startX,coords.startY,coords.endX,coords.endY,isHighlighted,isDarkMode,linkWidth),link.label&&globalScale>=.5&&drawEdgeLabel(ctx,link.label,coords.midX,coords.midY,globalScale,isHighlighted,isDarkMode)}}if(!isComparisonEdge&&link.label&&link.source&&link.target&&globalScale>=.5){const{startNode,endNode}=getNodesFromLink(link);if(startNode&&endNode&&void 0!==startNode.x&&void 0!==startNode.y&&void 0!==endNode.x&&void 0!==endNode.y&&isFinite(startNode.x)&&isFinite(startNode.y)&&isFinite(endNode.x)&&isFinite(endNode.y)){const coords=getEdgeCoordinates(link,startNode,endNode,GraphNodeUtils.bf);coords&&drawEdgeLabel(ctx,link.label,coords.midX,coords.midY,globalScale,isHighlighted,isDarkMode)}}},[highlightedEdgeId,isDarkMode,getEdgeCoordinates,GraphNodeUtils.bf,drawComparisonEdge,drawEdgeLabel,getNodesFromLink,graphData.nodes]),nodeLabel=(0,react.useCallback)(node=>(0,GraphNodeUtils.v0)(node),[]),nodeVal=(0,react.useCallback)(node=>(0,GraphNodeUtils.bf)(node.hasChildren),[]),linkColorFn=(0,react.useCallback)(link=>"differentiating"===link.type?"rgba(0,0,0,0)":linkColor,[linkColor]),linkWidthFn=(0,react.useCallback)(link=>"differentiating"===link.type?.1:getEdgeWidth(link,!1),[getEdgeWidth]),linkDirectionalArrowLengthFn=(0,react.useCallback)(link=>"differentiating"===link.type?0:6,[]),linkDirectionalArrowRelPosFn=(0,react.useCallback)(link=>{if("differentiating"===link.type)return 0;const targetNode=graphData.nodes.find(n=>n.id===link.target);if(targetNode&&graphRef.current){const nodeRadius=(0,GraphNodeUtils.bf)(targetNode.hasChildren),sourceNode=graphData.nodes.find(n=>n.id===link.source);if(sourceNode&&void 0!==sourceNode.x&&void 0!==sourceNode.y&&void 0!==targetNode.x&&void 0!==targetNode.y){const dx=targetNode.x-sourceNode.x,dy=targetNode.y-sourceNode.y,distance=Math.sqrt(dx*dx+dy*dy);if(distance>0){const arrowLength=6,relPos=Math.max(0,(distance-nodeRadius-arrowLength)/distance);return Math.min(.999,Math.max(.9,relPos))}}}return.98},[GraphNodeUtils.bf]),linkDirectionalArrowColorFn=(0,react.useCallback)(()=>arrowColor,[arrowColor]),d3ForceLinkFn=(0,react.useMemo)(()=>d3.forceLink().id(d=>d.id).distance(50),[d3]),d3ForceChargeFn=(0,react.useMemo)(()=>d3.forceManyBody().strength(-200),[d3]),d3ForceCollisionFn=(0,react.useMemo)(()=>d3.forceCollide().radius(d=>(0,GraphNodeUtils.bf)(d.hasChildren)+5),[d3,GraphNodeUtils.bf]);(0,react.useEffect)(()=>{graphRef.current&&(graphRef.current?.d3Force?.("link",d3ForceLinkFn),graphRef.current?.d3Force?.("charge",d3ForceChargeFn),graphRef.current?.d3Force?.("collision",d3ForceCollisionFn))},[d3ForceLinkFn,d3ForceChargeFn,d3ForceCollisionFn]),(0,react.useEffect)(()=>{if(!graphRef.current)return;if(1===previousZoomRef.current){const currentZoom=graphRef.current?.zoom?.();currentZoom&&(previousZoomRef.current=currentZoom)}const handleCanvasContextMenu=event=>{const canvas=event.target?.closest("canvas");if(canvas){const containerRect=canvas.getBoundingClientRect();rightClickPositionRef.current={x:event.clientX-containerRect.left,y:event.clientY-containerRect.top}}},handleWheel=event=>{if(!graphRef.current)return;const currentZoom=graphRef.current.zoom()||1,zoomFactor=event.deltaY>0?.9:1.1,newZoom=currentZoom*zoomFactor;if(zoomFactor>1){if(!canZoomIn(newZoom))return event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation(),!1;if(highlightedNodeId){const highlightedNode=graphData.nodes.find(n=>n.id===highlightedNodeId);if(highlightedNode&&void 0!==highlightedNode.x&&void 0!==highlightedNode.y&&isFinite(highlightedNode.x)&&isFinite(highlightedNode.y)){event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation(),isAdjustingZoomRef.current=!0;const zoomDelay=isMobile?100:0;return setTimeout(()=>{requestAnimationFrame(()=>{graphRef.current&&(graphRef.current.zoom(newZoom,100),graphRef.current.centerAt(highlightedNode.x,highlightedNode.y,100))})},zoomDelay),setTimeout(()=>{isAdjustingZoomRef.current=!1,previousZoomRef.current=newZoom},150+zoomDelay),!1}}}else{if(!canZoomOut(newZoom))return event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation(),!1;if(highlightedNodeId){const highlightedNode=graphData.nodes.find(n=>n.id===highlightedNodeId);if(highlightedNode&&void 0!==highlightedNode.x&&void 0!==highlightedNode.y&&isFinite(highlightedNode.x)&&isFinite(highlightedNode.y)){event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation(),isAdjustingZoomRef.current=!0;const zoomDelay=isMobile?100:0;return setTimeout(()=>{requestAnimationFrame(()=>{graphRef.current&&(graphRef.current.zoom(newZoom,100),graphRef.current.centerAt(highlightedNode.x,highlightedNode.y,100))})},zoomDelay),setTimeout(()=>{isAdjustingZoomRef.current=!1,previousZoomRef.current=newZoom},150+zoomDelay),!1}}}},graphContainer=graphRef.current?.parentElement;graphContainer&&graphContainer.addEventListener("wheel",handleWheel,{passive:!1,capture:!0});let canvas=null;const timeoutId=setTimeout(()=>{canvas=(()=>{const graphContainer=graphRef.current?.parentElement,canvas=graphContainer?.querySelector("canvas");return canvas?(canvas.addEventListener("contextmenu",handleCanvasContextMenu),canvas.addEventListener("wheel",handleWheel,{passive:!1,capture:!0}),canvas):null})()},100);return()=>{clearTimeout(timeoutId),canvas&&(canvas.removeEventListener("contextmenu",handleCanvasContextMenu),canvas.removeEventListener("wheel",handleWheel,{capture:!0}));const graphContainer=graphRef.current?.parentElement;graphContainer&&graphContainer.removeEventListener("wheel",handleWheel,{capture:!0})}},[width,height,paneVisible,canZoomIn,canZoomOut,40,isMobile,containerDimensions]);const baseGraphAreaHeight=actualHeight-40,graphCanvasHeight=isMobile?Math.floor(.6*baseGraphAreaHeight):baseGraphAreaHeight,graphAreaHeight=isMobile&&!paneVisible?graphCanvasHeight:baseGraphAreaHeight,panelTextColor=isDarkMode?"#ffffff":"#1a1a1a",buttonHoverColor=isDarkMode?"#333":"#e0e0e0";return(0,jsx_runtime.jsxs)("div",{ref:outerContainerRef,className:`${GraphRenderer_module.A.container} ${isDarkMode?GraphRenderer_module.A.containerDark:GraphRenderer_module.A.containerLight}`,children:[(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.graphArea,style:{height:graphAreaHeight},children:[(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.graphCanvas} ${paneVisible?GraphRenderer_module.A.graphCanvasWithPane:GraphRenderer_module.A.graphCanvasWithoutPane}`,style:{height:graphCanvasHeight,width:"100%",flexShrink:0},children:(0,jsx_runtime.jsx)(ForceGraph2D,{ref:graphRef,graphData:memoizedGraphData,width:graphWidth,height:graphCanvasHeight,backgroundColor,nodeLabel,nodeVal,linkColor:linkColorFn,linkWidth:linkWidthFn,linkDirectionalArrowLength:linkDirectionalArrowLengthFn,linkDirectionalArrowRelPos:linkDirectionalArrowRelPosFn,linkDirectionalArrowColor:linkDirectionalArrowColorFn,onNodeClick:handleNodeClick,onNodeRightClick:handleNodeRightClick,onLinkClick:handleLinkClick,onLinkRightClick:handleLinkRightClick,onNodeDrag:handleNodeDrag,onNodeDragEnd:handleNodeDragEnd,onZoom:handleZoom,nodeCanvasObjectMode:()=>"replace",nodeCanvasObject,linkCanvasObjectMode,linkCanvasObject,cooldownTicks:100,onEngineStop:()=>{}})}),rightClickMenu&&(()=>{const node=graphData.nodes.find(n=>n.id===rightClickMenu.nodeId);if(!node)return null;const hasChildren=node.hasChildren,isExpanded=expandedNodes.has(rightClickMenu.nodeId),menuItems=[];return hasChildren&&menuItems.push({label:isExpanded?"Fold":"Expand",icon:isExpanded?"â–¼":"â–¶",action:()=>{toggleNodeExpansion(rightClickMenu.nodeId),setRightClickMenu(null)}}),menuItems.push({label:"Copy Anchor Link",icon:"ðŸ“‹",action:async()=>{await copyAnchorLink(rightClickMenu.nodeId,void 0),setRightClickMenu(null)}}),(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.rightClickMenu} ${isDarkMode?GraphRenderer_module.A.rightClickMenuDark:GraphRenderer_module.A.rightClickMenuLight}`,style:{left:`${rightClickMenu.x}px`,top:`${rightClickMenu.y}px`},onClick:e=>e.stopPropagation(),onContextMenu:e=>e.preventDefault(),children:menuItems.map((item,index)=>(0,jsx_runtime.jsxs)("button",{onClick:e=>{e.stopPropagation(),item.action()},className:`${GraphRenderer_module.A.rightClickMenuItem} ${isDarkMode?GraphRenderer_module.A.rightClickMenuItemDark:GraphRenderer_module.A.rightClickMenuItemLight}`,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=isDarkMode?"#333":"#f0f0f0"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,jsx_runtime.jsx)("span",{children:item.icon}),(0,jsx_runtime.jsx)("span",{children:item.label})]},index))})})(),contextMenu&&(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.contextMenu} ${isDarkMode?GraphRenderer_module.A.contextMenuDark:GraphRenderer_module.A.contextMenuLight}`,style:{left:`${contextMenu.x}px`,top:`${contextMenu.y}px`},onClick:e=>e.stopPropagation(),onContextMenu:e=>e.preventDefault(),children:(0,jsx_runtime.jsx)("button",{onClick:()=>copyAnchorLink(contextMenu.nodeId,contextMenu.edgeId),className:`${GraphRenderer_module.A.contextMenuItem} ${isDarkMode?GraphRenderer_module.A.contextMenuItemDark:GraphRenderer_module.A.contextMenuItemLight}`,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=isDarkMode?"#333":"#f0f0f0"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"ðŸ“‹ Copy Anchor Link"})}),paneVisible&&(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.sidePanel} ${isDarkMode?GraphRenderer_module.A.sidePanelDark:GraphRenderer_module.A.sidePanelLight}`,style:{height:isMobile?Math.floor(.4*graphAreaHeight):graphAreaHeight},children:selectedNode?(()=>{const ingressLinks=graphData.links.filter(link=>("string"==typeof link.target?link.target:link.target?.id)===selectedNode.id),egressLinks=graphData.links.filter(link=>("string"==typeof link.source?link.source:link.source?.id)===selectedNode.id),ingressNodes=ingressLinks.map(link=>{const sourceId="string"==typeof link.source?link.source:link.source?.id;return graphData.nodes.find(n=>n.id===sourceId)}).filter(Boolean),egressNodes=egressLinks.map(link=>{const targetId="string"==typeof link.target?link.target:link.target?.id;return graphData.nodes.find(n=>n.id===targetId)}).filter(Boolean),handleNodeClick=nodeId=>{const node=graphData.nodes.find(n=>n.id===nodeId);if(node&&(setSelectedNode(cleanNodeForSelection(node)),setHighlightedNodeId(nodeId),setSelectedEdge(null),setHighlightedEdgeId(null),node.hasChildren&&!expandedNodes.has(nodeId)&&setExpandedNodes(prev=>{const newSet=new Set(prev);return newSet.add(nodeId),newSet}),graphId&&(window.location.hash=`#${graphId}-node-${nodeId}`),graphRef.current&&void 0!==node.x&&void 0!==node.y)){setTimeout(()=>{requestAnimationFrame(()=>{graphRef.current&&graphRef.current?.centerAt?.(node.x,node.y,500)})},isMobile?200:0)}},linkStyle={color:isDarkMode?"#68BDF6":"#2563eb",borderBottom:"1px solid "+(isDarkMode?"#333":"#eee")},linkHoverStyle={opacity:.7};return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:`${GraphRenderer_module.A.panelTitle} ${isDarkMode?GraphRenderer_module.A.panelTitleDark:GraphRenderer_module.A.panelTitleLight}`,children:selectedNode.title||selectedNode.name||selectedNode.id}),selectedNode.description&&"string"==typeof selectedNode.description&&(0,jsx_runtime.jsx)("p",{className:`${GraphRenderer_module.A.panelDescription} ${isDarkMode?GraphRenderer_module.A.panelDescriptionDark:GraphRenderer_module.A.panelDescriptionLight}`,children:selectedNode.description}),!selectedNode.description&&(0,jsx_runtime.jsx)("p",{className:`${GraphRenderer_module.A.panelDescription} ${GraphRenderer_module.A.panelDescriptionEmpty} ${isDarkMode?GraphRenderer_module.A.panelDescriptionDark:GraphRenderer_module.A.panelDescriptionLight}`,children:"No description"}),ingressNodes.length>0&&(0,jsx_runtime.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,jsx_runtime.jsxs)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:["Ingress (",ingressNodes.length,")"]}),(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.panelSectionContent} ${isDarkMode?GraphRenderer_module.A.panelSectionContentDark:GraphRenderer_module.A.panelSectionContentLight}`,children:ingressNodes.map((node,idx)=>{const link=ingressLinks[idx],linkLabel=link?.label||"connected from";return(0,jsx_runtime.jsx)("div",{className:idx<ingressNodes.length-1?GraphRenderer_module.A.panelNodeItem:GraphRenderer_module.A.panelNodeItemLast,children:(0,jsx_runtime.jsxs)("a",{onClick:e=>{e.preventDefault(),handleNodeClick(node.id)},className:`${GraphRenderer_module.A.panelLink} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,jsx_runtime.jsx)("span",{className:GraphRenderer_module.A.panelLinkText,children:node.title||node.name||node.id}),linkLabel&&(0,jsx_runtime.jsxs)("span",{className:GraphRenderer_module.A.panelLinkLabel,children:["(",linkLabel,")"]})]})},node.id)})})]}),egressNodes.length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:["Egress (",egressNodes.length,")"]}),(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.panelSectionContent} ${isDarkMode?GraphRenderer_module.A.panelSectionContentDark:GraphRenderer_module.A.panelSectionContentLight}`,children:egressNodes.map((node,idx)=>{const link=egressLinks[idx],linkLabel=link?.label||"connected to";return(0,jsx_runtime.jsx)("div",{className:idx<egressNodes.length-1?GraphRenderer_module.A.panelNodeItem:GraphRenderer_module.A.panelNodeItemLast,children:(0,jsx_runtime.jsxs)("a",{onClick:e=>{e.preventDefault(),handleNodeClick(node.id)},className:`${GraphRenderer_module.A.panelLink} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,jsx_runtime.jsx)("span",{className:GraphRenderer_module.A.panelLinkText,children:node.title||node.name||node.id}),linkLabel&&(0,jsx_runtime.jsxs)("span",{className:GraphRenderer_module.A.panelLinkLabel,children:["(",linkLabel,")"]})]})},node.id)})})]}),0===ingressNodes.length&&0===egressNodes.length&&(0,jsx_runtime.jsx)("p",{className:`${GraphRenderer_module.A.panelNoConnections} ${isDarkMode?GraphRenderer_module.A.panelNoConnectionsDark:GraphRenderer_module.A.panelNoConnectionsLight}`,children:"No connections"}),selectedNode.keyLinks&&selectedNode.keyLinks.length>0&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSectionDivider} ${isDarkMode?GraphRenderer_module.A.panelSectionDividerDark:GraphRenderer_module.A.panelSectionDividerLight}`,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Learn More"}),(0,jsx_runtime.jsx)("div",{className:GraphRenderer_module.A.panelExternalLinksContainer,children:selectedNode.keyLinks.map((link,idx)=>{let displayText=link;try{const url=new URL(link);if(displayText=url.hostname.replace("www.",""),displayText.includes("github.com")){const pathParts=url.pathname.split("/").filter(p=>p);displayText=pathParts.length>=2?`GitHub: ${pathParts[0]}/${pathParts[1]}`:"GitHub"}else displayText.includes("medium.com")?displayText="Medium":displayText.includes("docs.")&&(displayText=displayText.replace("docs.",""))}catch(e){displayText=link.length>50?link.substring(0,50)+"...":link}return(0,jsx_runtime.jsxs)("a",{href:link,target:"_blank",rel:"noopener noreferrer",className:`${GraphRenderer_module.A.panelLinkBase} ${GraphRenderer_module.A.panelExternalLink} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,style:{color:linkStyle.color,borderBottom:linkStyle.borderBottom},onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},title:link,children:["ðŸ”— ",displayText," â†’"]},idx)})})]}),selectedNode.markdownSection&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSectionDivider} ${isDarkMode?GraphRenderer_module.A.panelSectionDividerDark:GraphRenderer_module.A.panelSectionDividerLight}`,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Documentation"}),(0,jsx_runtime.jsx)("a",{href:`#${selectedNode.markdownSection}`,onClick:e=>{e.preventDefault(),setTimeout(()=>{let section=document.getElementById(selectedNode.markdownSection);if(section||(section=document.getElementById(`article-${selectedNode.markdownSection}`)),section||(section=document.querySelector(`[data-graph-node="${selectedNode.markdownSection}"]`)),section){const rect=section.getBoundingClientRect(),scrollTop=window.pageYOffset||document.documentElement.scrollTop,targetY=rect.top+scrollTop-window.innerHeight/2+rect.height/2;window.scrollTo({top:targetY,behavior:"smooth"}),section.style.transition="background-color 0.3s",section.style.backgroundColor=isDarkMode?"rgba(255, 215, 0, 0.2)":"rgba(255, 215, 0, 0.3)",setTimeout(()=>{section.style.backgroundColor=""},2e3)}else{const headings=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const heading of Array.from(headings)){const headingEl=heading;if((headingEl.id||headingEl.getAttribute("data-graph-node"))===selectedNode.markdownSection||headingEl.textContent?.toLowerCase().includes(selectedNode.markdownSection.toLowerCase())){const rect=headingEl.getBoundingClientRect(),scrollTop=window.pageYOffset||document.documentElement.scrollTop,targetY=rect.top+scrollTop-window.innerHeight/2+rect.height/2;window.scrollTo({top:targetY,behavior:"smooth"}),headingEl.style.transition="background-color 0.3s",headingEl.style.backgroundColor=isDarkMode?"rgba(255, 215, 0, 0.2)":"rgba(255, 215, 0, 0.3)",setTimeout(()=>{headingEl.style.backgroundColor=""},2e3);break}}}},100)},className:`${GraphRenderer_module.A.panelLinkBase} ${GraphRenderer_module.A.panelExternalLink} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,style:{color:linkStyle.color,borderBottom:linkStyle.borderBottom},onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"ðŸ“„ View in Documentation â†’"})]})]})})():selectedEdge?(()=>{const sourceId="string"==typeof selectedEdge.source?selectedEdge.source:selectedEdge.source?.id||String(selectedEdge.source),targetId="string"==typeof selectedEdge.target?selectedEdge.target:selectedEdge.target?.id||String(selectedEdge.target),sourceNode=graphData.nodes.find(n=>n.id===sourceId),targetNode=graphData.nodes.find(n=>n.id===targetId),sourceDisplayName=sourceNode?.title||sourceNode?.name||sourceId,targetDisplayName=targetNode?.title||targetNode?.name||targetId,handleNodeClick=nodeId=>{const node=graphData.nodes.find(n=>n.id===nodeId);if(node&&(setSelectedNode(cleanNodeForSelection(node)),setHighlightedNodeId(nodeId),setSelectedEdge(null),setHighlightedEdgeId(null),node.hasChildren&&!expandedNodes.has(nodeId)&&setExpandedNodes(prev=>{const newSet=new Set(prev);return newSet.add(nodeId),newSet}),graphId&&(window.location.hash=`#${graphId}-node-${nodeId}`),graphRef.current&&void 0!==node.x&&void 0!==node.y)){setTimeout(()=>{requestAnimationFrame(()=>{graphRef.current&&graphRef.current?.centerAt?.(node.x,node.y,500)})},isMobile?200:0)}},linkStyle={color:isDarkMode?"#68BDF6":"#2563eb",borderBottom:"1px solid "+(isDarkMode?"#333":"#eee")},linkHoverStyle={opacity:.7};return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:`${GraphRenderer_module.A.panelTitle} ${isDarkMode?GraphRenderer_module.A.panelTitleDark:GraphRenderer_module.A.panelTitleLight}`,children:"differentiating"===selectedEdge.type?`${sourceDisplayName} vs. ${targetDisplayName}`:selectedEdge.label||"Edge"}),sourceNode&&(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelEdgeSection,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Source"}),(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSectionContent} ${isDarkMode?GraphRenderer_module.A.panelSectionContentDark:GraphRenderer_module.A.panelSectionContentLight}`,children:[(0,jsx_runtime.jsx)("a",{onClick:e=>{e.preventDefault(),handleNodeClick(sourceNode.id)},className:`${GraphRenderer_module.A.panelLinkBase} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,style:{color:linkStyle.color,borderBottom:linkStyle.borderBottom},onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,jsx_runtime.jsx)("span",{className:GraphRenderer_module.A.panelLinkText,children:sourceNode.title||sourceNode.name||sourceNode.id})}),sourceNode.description&&(0,jsx_runtime.jsx)("p",{className:`${GraphRenderer_module.A.panelEdgeNodeDescription} ${isDarkMode?GraphRenderer_module.A.panelEdgeNodeDescriptionDark:GraphRenderer_module.A.panelEdgeNodeDescriptionLight}`,children:sourceNode.description})]})]}),targetNode&&(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelEdgeSection,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Destination"}),(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSectionContent} ${isDarkMode?GraphRenderer_module.A.panelSectionContentDark:GraphRenderer_module.A.panelSectionContentLight}`,children:[(0,jsx_runtime.jsx)("a",{onClick:e=>{e.preventDefault(),handleNodeClick(targetNode.id)},className:`${GraphRenderer_module.A.panelLinkBase} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,style:{color:linkStyle.color,borderBottom:linkStyle.borderBottom},onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,jsx_runtime.jsx)("span",{className:GraphRenderer_module.A.panelLinkText,children:targetNode.title||targetNode.name||targetNode.id})}),targetNode.description&&(0,jsx_runtime.jsx)("p",{className:`${GraphRenderer_module.A.panelEdgeNodeDescription} ${isDarkMode?GraphRenderer_module.A.panelEdgeNodeDescriptionDark:GraphRenderer_module.A.panelEdgeNodeDescriptionLight}`,children:targetNode.description})]})]}),"differentiating"===selectedEdge.type&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[selectedEdge.sourceData&&selectedEdge.targetData&&(0,jsx_runtime.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:isDarkMode?"#2a2a2a":"#f5f5f5",borderRadius:"4px"},children:[(0,jsx_runtime.jsx)("h4",{style:{margin:"0 0 8px 0",color:panelTextColor,fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.8},children:"Key Features"}),(0,jsx_runtime.jsxs)("div",{style:{fontSize:"11px",lineHeight:"1.6"},children:[(0,jsx_runtime.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,jsx_runtime.jsxs)("strong",{style:{color:isDarkMode?"#68BDF6":"#0066cc"},children:[sourceDisplayName,":"]}),(0,jsx_runtime.jsx)("ul",{style:{margin:"4px 0 0 0",paddingLeft:"20px",listStyleType:"disc"},children:(selectedEdge.sourceData.key_features||[]).map((feature,idx)=>(0,jsx_runtime.jsx)("li",{children:feature},idx))})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("strong",{style:{color:isDarkMode?"#60BE86":"#006600"},children:[targetDisplayName,":"]}),(0,jsx_runtime.jsx)("ul",{style:{margin:"4px 0 0 0",paddingLeft:"20px",listStyleType:"disc"},children:(selectedEdge.targetData.key_features||[]).map((feature,idx)=>(0,jsx_runtime.jsx)("li",{children:feature},idx))})]})]})]}),selectedEdge.sourceData&&selectedEdge.targetData&&selectedEdge.sourceData.main_use_case&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSectionContent} ${isDarkMode?GraphRenderer_module.A.panelSectionContentDark:GraphRenderer_module.A.panelSectionContentLight} ${GraphRenderer_module.A.panelEdgeSection}`,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Use Cases"}),(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelUseCasesContainer,children:[(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelUseCaseItem,children:[(0,jsx_runtime.jsxs)("strong",{children:[sourceDisplayName,":"]})," ",selectedEdge.sourceData.main_use_case]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("strong",{children:[targetDisplayName,":"]})," ",selectedEdge.targetData.main_use_case]})]})]}),selectedEdge.similarities&&selectedEdge.similarities.length>0&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSimilaritiesContainer} ${isDarkMode?GraphRenderer_module.A.panelSimilaritiesContainerDark:GraphRenderer_module.A.panelSimilaritiesContainerLight}`,children:[(0,jsx_runtime.jsx)("h4",{className:GraphRenderer_module.A.panelSimilaritiesTitle,children:"Similarities"}),(0,jsx_runtime.jsx)("ul",{className:GraphRenderer_module.A.panelSimilaritiesList,children:selectedEdge.similarities.map((similarity,idx)=>(0,jsx_runtime.jsx)("li",{children:similarity},idx))})]}),selectedEdge.differences&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelDifferencesContainer} ${isDarkMode?GraphRenderer_module.A.panelDifferencesContainerDark:GraphRenderer_module.A.panelDifferencesContainerLight}`,children:[(0,jsx_runtime.jsx)("h4",{className:GraphRenderer_module.A.panelDifferencesTitle,children:"Differences"}),selectedEdge.differences.source&&selectedEdge.differences.source.length>0&&(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelDifferencesSection,children:[(0,jsx_runtime.jsxs)("strong",{className:`${GraphRenderer_module.A.panelDifferencesLabel} ${isDarkMode?GraphRenderer_module.A.panelDifferencesLabelDark:GraphRenderer_module.A.panelDifferencesLabelLight}`,children:[selectedEdge.source," only:"]}),(0,jsx_runtime.jsx)("ul",{className:GraphRenderer_module.A.panelDifferencesListWithMargin,children:selectedEdge.differences.source.map((diff,idx)=>(0,jsx_runtime.jsx)("li",{children:diff},idx))})]}),selectedEdge.differences.target&&selectedEdge.differences.target.length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("strong",{className:`${GraphRenderer_module.A.panelDifferencesLabel} ${isDarkMode?GraphRenderer_module.A.panelDifferencesLabelDark:GraphRenderer_module.A.panelDifferencesLabelLight}`,children:[selectedEdge.target," only:"]}),(0,jsx_runtime.jsx)("ul",{className:GraphRenderer_module.A.panelDifferencesListWithMargin,children:selectedEdge.differences.target.map((diff,idx)=>(0,jsx_runtime.jsx)("li",{children:diff},idx))})]})]}),selectedEdge.sourceData&&selectedEdge.targetData&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelKeyDifferentiatorsContainer} ${isDarkMode?GraphRenderer_module.A.panelKeyDifferentiatorsContainerDark:GraphRenderer_module.A.panelKeyDifferentiatorsContainerLight}`,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Key Differentiators"}),(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelKeyDifferentiatorsContent,children:[(0,jsx_runtime.jsxs)("div",{className:GraphRenderer_module.A.panelKeyDifferentiatorsItem,children:[(0,jsx_runtime.jsxs)("strong",{children:[sourceDisplayName,":"]})," ",selectedEdge.sourceData.differentiators]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("strong",{children:[targetDisplayName,":"]})," ",selectedEdge.targetData.differentiators]})]})]})]}),selectedEdge.markdownSection&&(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.panelSectionDivider} ${isDarkMode?GraphRenderer_module.A.panelSectionDividerDark:GraphRenderer_module.A.panelSectionDividerLight}`,children:[(0,jsx_runtime.jsx)("h4",{className:`${GraphRenderer_module.A.panelSectionTitle} ${isDarkMode?GraphRenderer_module.A.panelSectionTitleDark:GraphRenderer_module.A.panelSectionTitleLight}`,children:"Documentation"}),(0,jsx_runtime.jsx)("a",{href:`#${selectedEdge.markdownSection}`,onClick:e=>{e.preventDefault(),setTimeout(()=>{let section=document.getElementById(selectedEdge.markdownSection);if(section||(section=document.getElementById(`article-${selectedEdge.markdownSection}`)),section||(section=document.querySelector(`[data-graph-edge="${selectedEdge.markdownSection}"]`)),section){const rect=section.getBoundingClientRect(),scrollTop=window.pageYOffset||document.documentElement.scrollTop,targetY=rect.top+scrollTop-window.innerHeight/2+rect.height/2;window.scrollTo({top:targetY,behavior:"smooth"}),section.style.transition="background-color 0.3s",section.style.backgroundColor=isDarkMode?"rgba(255, 215, 0, 0.2)":"rgba(255, 215, 0, 0.3)",setTimeout(()=>{section.style.backgroundColor=""},2e3)}else{const headings=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const heading of Array.from(headings)){const headingEl=heading;if((headingEl.id||headingEl.getAttribute("data-graph-edge"))===selectedEdge.markdownSection||headingEl.textContent?.toLowerCase().includes(selectedEdge.markdownSection.toLowerCase())){const rect=headingEl.getBoundingClientRect(),scrollTop=window.pageYOffset||document.documentElement.scrollTop,targetY=rect.top+scrollTop-window.innerHeight/2+rect.height/2;window.scrollTo({top:targetY,behavior:"smooth"}),headingEl.style.transition="background-color 0.3s",headingEl.style.backgroundColor=isDarkMode?"rgba(255, 215, 0, 0.2)":"rgba(255, 215, 0, 0.3)",setTimeout(()=>{headingEl.style.backgroundColor=""},2e3);break}}}},100)},className:`${GraphRenderer_module.A.panelLinkBase} ${GraphRenderer_module.A.panelExternalLink} ${isDarkMode?GraphRenderer_module.A.panelLinkDark:GraphRenderer_module.A.panelLinkLight}`,style:{color:linkStyle.color,borderBottom:linkStyle.borderBottom},onMouseEnter:e=>{Object.assign(e.currentTarget.style,linkHoverStyle)},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"ðŸ“„ View in Documentation â†’"})]})]})})():(0,jsx_runtime.jsx)("div",{className:`${GraphRenderer_module.A.panelEmptyState} ${isDarkMode?GraphRenderer_module.A.panelEmptyStateDark:GraphRenderer_module.A.panelEmptyStateLight}`,children:"Hover or click a node or edge"})})]}),(0,jsx_runtime.jsxs)("div",{className:`${GraphRenderer_module.A.menuBarBase} ${GraphRenderer_module.A.menuBar} ${isDarkMode?GraphRenderer_module.A.menuBarDark:GraphRenderer_module.A.menuBarLight}`,style:{height:40},children:[(0,jsx_runtime.jsx)("button",{onClick:autoCenter,className:`${GraphRenderer_module.A.menuBarButton} ${isDarkMode?GraphRenderer_module.A.menuBarButtonDark:GraphRenderer_module.A.menuBarButtonLight}`,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=buttonHoverColor},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Center"}),(0,jsx_runtime.jsx)("button",{onClick:expandAll,className:`${GraphRenderer_module.A.menuBarButton} ${isDarkMode?GraphRenderer_module.A.menuBarButtonDark:GraphRenderer_module.A.menuBarButtonLight}`,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=buttonHoverColor},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Expand All"}),(0,jsx_runtime.jsx)("button",{onClick:collapseAll,className:`${GraphRenderer_module.A.menuBarButton} ${isDarkMode?GraphRenderer_module.A.menuBarButtonDark:GraphRenderer_module.A.menuBarButtonLight}`,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=buttonHoverColor},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Collapse All"}),(0,jsx_runtime.jsx)("div",{className:GraphRenderer_module.A.menuBarSpacer}),(0,jsx_runtime.jsx)("button",{onClick:togglePane,className:`${GraphRenderer_module.A.menuBarButton} ${GraphRenderer_module.A.menuBarToggle} ${isDarkMode?GraphRenderer_module.A.menuBarButtonDark:GraphRenderer_module.A.menuBarButtonLight}`,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=buttonHoverColor},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:paneVisible?"Hide Pane":"Show Pane"})]})]})},GraphRenderer=props=>{const[isLoading,setIsLoading]=(0,react.useState)(!0),[error,setError]=(0,react.useState)(null),[dependencies,setDependencies]=(0,react.useState)(null);return(0,react.useEffect)(()=>{(async()=>{try{const[reactForceGraphModule,d3Module,nodeRendererModule]=await Promise.all([Promise.all([__webpack_require__.e(963),__webpack_require__.e(39)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-force-graph-2d/dist/react-force-graph-2d.mjs")),__webpack_require__.e(200).then(__webpack_require__.bind(__webpack_require__,"./node_modules/d3-force/src/index.js")),__webpack_require__.e(752).then(__webpack_require__.bind(__webpack_require__,"./src/components/Graph/NodeRenderer.ts"))]),ForceGraph2D=reactForceGraphModule.default;if(!ForceGraph2D)return console.error("ForceGraph2D not found. Available exports:",Object.keys(reactForceGraphModule)),void setError("ForceGraph2D component not found");setDependencies({ForceGraph2D,d3:d3Module,NodeRenderer:nodeRendererModule.NodeRenderer}),setIsLoading(!1)}catch(err){console.error("Error loading GraphRenderer dependencies:",err),setError(err instanceof Error?err.message:"Unknown error"),setIsLoading(!1)}})()},[]),(0,jsx_runtime.jsx)(BrowserOnlyMock.A,{fallback:(0,jsx_runtime.jsx)("div",{children:"Loading graph..."}),children:()=>"undefined"==typeof window||isLoading?(0,jsx_runtime.jsx)("div",{children:"Loading graph..."}):error||!dependencies?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{children:["Error loading graph: ",error||"Dependencies not loaded"]}),(0,jsx_runtime.jsx)("div",{style:{fontSize:"12px",marginTop:"8px",color:"#666"},children:"Please refresh the page."})]}):(0,jsx_runtime.jsx)(GraphRendererImpl,{...props,ForceGraph2D:dependencies.ForceGraph2D,d3:dependencies.d3,NodeRenderer:dependencies.NodeRenderer})})},Graph_GraphRenderer=GraphRenderer;try{GraphRenderer.displayName="GraphRenderer",GraphRenderer.__docgenInfo={description:'============================================================================\nBROWSER-ONLY WRAPPER\n============================================================================\n\nWHY BrowserOnly IS NEEDED:\n- Docusaurus generates static HTML (SSR/SSG)\n- Browser-only APIs (window, canvas, force-graph) don\'t exist on server\n- BrowserOnly ensures component only renders in browser, not during build\n\nDYNAMIC IMPORT PATTERN:\n- Load dependencies inside BrowserOnly callback using async import()\n- Prevents bundling issues and circular dependencies\n- Allows graceful loading states and error handling\n\nreact-force-graph-2d vs react-force-graph:\n- react-force-graph-2d: 2D-only, no A-Frame dependencies\n- react-force-graph: Includes 3D/VR/AR (A-Frame), causes "AFRAME is not defined" errors\n- Use 2D version unless you need 3D/VR features\n\n============================================================================',displayName:"GraphRenderer",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GraphData"}},width:{defaultValue:{value:"800"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"600"},description:"",name:"height",required:!1,type:{name:"number"}},highlightNodeId:{defaultValue:null,description:"",name:"highlightNodeId",required:!1,type:{name:"string"}},highlightEdgeId:{defaultValue:null,description:"",name:"highlightEdgeId",required:!1,type:{name:"string"}},graphId:{defaultValue:{value:"graph"},description:"",name:"graphId",required:!1,type:{name:"string"}},onEdgeClick:{defaultValue:null,description:"",name:"onEdgeClick",required:!1,type:{name:"(edge: any) => void"}},initialExpandedNodes:{defaultValue:null,description:"",name:"initialExpandedNodes",required:!1,type:{name:"Set<string>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/GraphRenderer.tsx#GraphRenderer"]={docgenInfo:GraphRenderer.__docgenInfo,name:"GraphRenderer",path:"src/components/Graph/GraphRenderer.tsx#GraphRenderer"})}catch(__react_docgen_typescript_loader_error){}const AIFrameworkGraph=({data})=>{const{colorMode}=(0,theme_common_mock.G)(),[selectedEdge,setSelectedEdge]=(0,react.useState)(null),defaultExpandedNodes=(0,react.useMemo)(()=>{const categories=new Set;return Object.values(data.data).forEach(techData=>{categories.add(`category-${techData.category}`)}),new Set(categories)},[data]),graphData=(0,react.useMemo)(()=>{const nodes=[],links=[],categoryMap=new Map;Object.entries(data.data).forEach(([techName,techData])=>{const category=techData.category;categoryMap.has(category)||categoryMap.set(category,[]),categoryMap.get(category).push(techName)});const categorySectionMap={framework:"frameworks",specialized_library:"specialized-libraries",multi_agent_framework:"multi-agent-frameworks",platform:"platforms",development_tool:"tools",low_code_platform:"low-code-platforms"},categoryNodes=Array.from(categoryMap.keys()).map((category,index)=>({id:`category-${category}`,title:category.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),label:category.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),description:`Category: ${category.replace(/_/g," ")}`,group:0,color:"#68BDF6",markdownSection:categorySectionMap[category]||category.replace(/_/g,"-"),children:categoryMap.get(category).map(tech=>({id:tech,title:tech,label:tech,description:data.data[tech].main_use_case,group:1,color:"#60BE86",markdownSection:tech.toLowerCase().replace(/\s+/g,"-"),keyLinks:data.data[tech].key_links||[]}))}));nodes.push(...categoryNodes),categoryNodes.forEach(categoryNode=>{categoryNode.children.forEach(child=>{links.push({source:child.id,target:categoryNode.id,label:"is a",id:`category-${child.id}-${categoryNode.id}`,type:"category"})})}),Object.entries(data.data).forEach(([techName,techData])=>{techData.compared_with.forEach(comparedTech=>{if(data.data[comparedTech]){const comparedTechData=data.data[comparedTech],sourceFeatures=new Set(techData.key_features||[]),targetFeatures=new Set(comparedTechData.key_features||[]),similarities=Array.from(sourceFeatures).filter(f=>targetFeatures.has(f)),sourceOnly=Array.from(sourceFeatures).filter(f=>!targetFeatures.has(f)),targetOnly=Array.from(targetFeatures).filter(f=>!sourceFeatures.has(f)),[source,target]=[techName,comparedTech].sort(),baseEdgeId=`compare-${source}-${target}`;links.find(l=>l.id===`${baseEdgeId}-forward`||l.id===`${baseEdgeId}-reverse`)||(links.push({source:techName,target:comparedTech,label:"vs.",id:`${baseEdgeId}-forward`,type:"differentiating",similarities:similarities.length>0?similarities:void 0,differences:{source:sourceOnly,target:targetOnly},sourceData:techData,targetData:comparedTechData}),links.push({source:comparedTech,target:techName,label:"vs.",id:`${baseEdgeId}-reverse`,type:"differentiating",similarities:similarities.length>0?similarities:void 0,differences:{source:targetOnly,target:sourceOnly},sourceData:comparedTechData,targetData:techData}))}})});return{nodes,links:links.map(link=>({...link,source:"string"==typeof link.source?link.source:link.source?.id||String(link.source),target:"string"==typeof link.target?link.target:link.target?.id||String(link.target)}))}},[data]);return(0,jsx_runtime.jsx)("div",{style:{position:"relative"},children:(0,jsx_runtime.jsx)(Graph_GraphRenderer,{data:graphData,width:800,height:600,graphId:"ai-framework-graph",highlightEdgeId:selectedEdge?.id,onEdgeClick:edge=>{const comparisonEdge=graphData.links.find(l=>l.id===edge.id);comparisonEdge&&"differentiating"===comparisonEdge.type?setSelectedEdge(comparisonEdge):setSelectedEdge(null)},initialExpandedNodes:defaultExpandedNodes})})},Graph_AIFrameworkGraph=AIFrameworkGraph;try{AIFrameworkGraph.displayName="AIFrameworkGraph",AIFrameworkGraph.__docgenInfo={description:"",displayName:"AIFrameworkGraph",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"FrameworkData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/AIFrameworkGraph.tsx#AIFrameworkGraph"]={docgenInfo:AIFrameworkGraph.__docgenInfo,name:"AIFrameworkGraph",path:"src/components/Graph/AIFrameworkGraph.tsx#AIFrameworkGraph"})}catch(__react_docgen_typescript_loader_error){}const AIFrameworkGraph_stories={title:"Graph/AIFrameworkGraph",component:Graph_AIFrameworkGraph,parameters:{layout:"fullscreen",docs:{description:{component:'\nAIFrameworkGraph is a specialized implementation of GraphRenderer that displays\nAI framework and technology comparison data.\n\n## Features\n\n- **Category Grouping**: Technologies are grouped by category (frameworks, libraries, platforms, etc.)\n- **Comparison Edges**: Shows "vs." relationships between technologies\n- **Differentiating Edges**: Highlights differences and similarities between compared technologies\n- **Auto-expanded Categories**: Category nodes are expanded by default\n- **Dark Mode Support**: Adapts to theme color mode\n\n## Data Structure\n\nThe component expects `FrameworkData` with:\n- `data`: Record of technology data with category, use cases, features, etc.\n- `processed_technologies`: List of processed tech names\n- `queue` / `enhanced_queue`: Processing queues\n\n## Usage\n\n```tsx\n<AIFrameworkGraph data={frameworkData} />\n```\n        '}}},tags:["autodocs"],decorators:[Story=>(0,jsx_runtime.jsx)("div",{style:{padding:"20px",minHeight:"600px"},children:(0,jsx_runtime.jsx)(Story,{})})]},Basic={args:{data:{processed_technologies:["LangChain","LlamaIndex","AutoGPT"],queue:[],enhanced_queue:[],data:{LangChain:{category:"framework",main_use_case:"Building LLM applications with chains",compared_with:["LlamaIndex"],key_features:["Chains","Agents","Memory","Tools"],differentiators:"Focus on composable chains and agent workflows",key_links:["https://langchain.com"]},LlamaIndex:{category:"framework",main_use_case:"Building RAG applications",compared_with:["LangChain"],key_features:["Data Connectors","Indexing","Querying","Retrieval"],differentiators:"Specialized for retrieval-augmented generation",key_links:["https://llamaindex.ai"]},AutoGPT:{category:"multi_agent_framework",main_use_case:"Autonomous AI agents",compared_with:[],key_features:["Autonomy","Goal Setting","Task Planning"],differentiators:"Fully autonomous agent execution",key_links:["https://autogpt.net"]}}}}},WithMultipleTechnologies={args:{data:{processed_technologies:["LangChain","LlamaIndex","AutoGPT","CrewAI","Haystack"],queue:[],enhanced_queue:[],data:{LangChain:{category:"framework",main_use_case:"Building LLM applications with chains",compared_with:["LlamaIndex","Haystack"],key_features:["Chains","Agents","Memory","Tools"],differentiators:"Focus on composable chains and agent workflows",key_links:["https://langchain.com"]},LlamaIndex:{category:"framework",main_use_case:"Building RAG applications",compared_with:["LangChain"],key_features:["Data Connectors","Indexing","Querying","Retrieval"],differentiators:"Specialized for retrieval-augmented generation",key_links:["https://llamaindex.ai"]},AutoGPT:{category:"multi_agent_framework",main_use_case:"Autonomous AI agents",compared_with:["CrewAI"],key_features:["Autonomy","Goal Setting","Task Planning"],differentiators:"Fully autonomous agent execution",key_links:["https://autogpt.net"]},CrewAI:{category:"multi_agent_framework",main_use_case:"Multi-agent collaboration",compared_with:["AutoGPT"],key_features:["Role-based Agents","Collaboration","Task Delegation"],differentiators:"Role-based agent teams with collaboration",key_links:["https://crewai.com"]},Haystack:{category:"framework",main_use_case:"End-to-end NLP pipelines",compared_with:["LangChain"],key_features:["Pipelines","Document Stores","Retrievers","Readers"],differentiators:"Production-ready NLP pipeline framework",key_links:["https://haystack.deepset.ai"]}}}}},EmptyState={args:{data:{processed_technologies:[],queue:[],enhanced_queue:[],data:{}}}},SingleTechnology={args:{data:{processed_technologies:["LangChain"],queue:[],enhanced_queue:[],data:{LangChain:{category:"framework",main_use_case:"Building LLM applications",compared_with:[],key_features:["Chains","Agents"],differentiators:"Composable chains",key_links:[]}}}}},__namedExportsOrder=["Basic","WithMultipleTechnologies","EmptyState","SingleTechnology"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"{\n  args: {\n    data: mockFrameworkData\n  }\n}",...Basic.parameters?.docs?.source},description:{story:"Basic AI framework graph with minimal data.",...Basic.parameters?.docs?.description}}},WithMultipleTechnologies.parameters={...WithMultipleTechnologies.parameters,docs:{...WithMultipleTechnologies.parameters?.docs,source:{originalSource:"{\n  args: {\n    data: largerMockData\n  }\n}",...WithMultipleTechnologies.parameters?.docs?.source},description:{story:"AI framework graph with more technologies and comparisons.",...WithMultipleTechnologies.parameters?.docs?.description}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  args: {\n    data: {\n      processed_technologies: [],\n      queue: [],\n      enhanced_queue: [],\n      data: {}\n    }\n  }\n}",...EmptyState.parameters?.docs?.source},description:{story:"Empty state - no data.",...EmptyState.parameters?.docs?.description}}},SingleTechnology.parameters={...SingleTechnology.parameters,docs:{...SingleTechnology.parameters?.docs,source:{originalSource:"{\n  args: {\n    data: {\n      processed_technologies: ['LangChain'],\n      queue: [],\n      enhanced_queue: [],\n      data: {\n        LangChain: {\n          category: 'framework',\n          main_use_case: 'Building LLM applications',\n          compared_with: [],\n          key_features: ['Chains', 'Agents'],\n          differentiators: 'Composable chains',\n          key_links: []\n        }\n      }\n    }\n  }\n}",...SingleTechnology.parameters?.docs?.source},description:{story:"Single technology with no comparisons.",...SingleTechnology.parameters?.docs?.description}}};try{Basic.displayName="Basic",Basic.__docgenInfo={description:"Basic AI framework graph with minimal data.",displayName:"Basic",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/AIFrameworkGraph.stories.tsx#Basic"]={docgenInfo:Basic.__docgenInfo,name:"Basic",path:"src/components/Graph/AIFrameworkGraph.stories.tsx#Basic"})}catch(__react_docgen_typescript_loader_error){}try{WithMultipleTechnologies.displayName="WithMultipleTechnologies",WithMultipleTechnologies.__docgenInfo={description:"AI framework graph with more technologies and comparisons.",displayName:"WithMultipleTechnologies",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/AIFrameworkGraph.stories.tsx#WithMultipleTechnologies"]={docgenInfo:WithMultipleTechnologies.__docgenInfo,name:"WithMultipleTechnologies",path:"src/components/Graph/AIFrameworkGraph.stories.tsx#WithMultipleTechnologies"})}catch(__react_docgen_typescript_loader_error){}try{EmptyState.displayName="EmptyState",EmptyState.__docgenInfo={description:"Empty state - no data.",displayName:"EmptyState",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/AIFrameworkGraph.stories.tsx#EmptyState"]={docgenInfo:EmptyState.__docgenInfo,name:"EmptyState",path:"src/components/Graph/AIFrameworkGraph.stories.tsx#EmptyState"})}catch(__react_docgen_typescript_loader_error){}try{SingleTechnology.displayName="SingleTechnology",SingleTechnology.__docgenInfo={description:"Single technology with no comparisons.",displayName:"SingleTechnology",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Graph/AIFrameworkGraph.stories.tsx#SingleTechnology"]={docgenInfo:SingleTechnology.__docgenInfo,name:"SingleTechnology",path:"src/components/Graph/AIFrameworkGraph.stories.tsx#SingleTechnology"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Graph/GraphNodeUtils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function getNodeRadius(hasChildren){return hasChildren?12:8}function getNodeLabel(node){return node.title||node.name||node.id||""}__webpack_require__.d(__webpack_exports__,{bf:()=>getNodeRadius,v0:()=>getNodeLabel})},"./src/stories/mocks/BrowserOnlyMock.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=({fallback,children})=>"function"==typeof children?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:children()}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children});try{BrowserOnlyMock.displayName="BrowserOnlyMock",BrowserOnlyMock.__docgenInfo={description:"",displayName:"BrowserOnlyMock",props:{fallback:{defaultValue:null,description:"",name:"fallback",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/mocks/BrowserOnlyMock.tsx#BrowserOnlyMock"]={docgenInfo:BrowserOnlyMock.__docgenInfo,name:"BrowserOnlyMock",path:"src/stories/mocks/BrowserOnlyMock.tsx#BrowserOnlyMock"})}catch(__react_docgen_typescript_loader_error){}},"./src/stories/mocks/theme-common-mock.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function useColorMode(){return{colorMode:"light",setColorMode:()=>{}}}__webpack_require__.d(__webpack_exports__,{G:()=>useColorMode})}}]);