"use strict";(globalThis.webpackChunkbytesofpurpose_blog=globalThis.webpackChunkbytesofpurpose_blog||[]).push([[963],{"./node_modules/force-graph/dist/force-graph.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>forceGraph});var d3_selection__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-selection/src/select.js"),d3_zoom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-zoom/src/index.js"),d3_drag__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/d3-drag/src/drag.js"),d3_array__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/d3-array/src/max.js"),d3_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/d3-array/src/min.js"),d3_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/d3-array/src/sum.js"),lodash_es__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lodash-es/throttle.js"),_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@tweenjs/tween.js/dist/tween.esm.js"),kapsule__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/kapsule/dist/kapsule.mjs"),accessor_fn__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/accessor-fn/dist/accessor-fn.mjs"),canvas_color_tracker__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/canvas-color-tracker/dist/canvas-color-tracker.mjs"),float_tooltip__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/float-tooltip/dist/float-tooltip.mjs"),d3_force_3d__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/d3-force-3d/src/center.js"),d3_force_3d__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/d3-force-3d/src/link.js"),d3_force_3d__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/d3-force-3d/src/manyBody.js"),d3_force_3d__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/d3-force-3d/src/radial.js"),d3_force_3d__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/d3-force-3d/src/simulation.js"),bezier_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/bezier-js/src/bezier.js"),index_array_by__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/index-array-by/dist/index-array-by.mjs"),d3_scale__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/d3-scale/src/ordinal.js"),d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/d3-scale-chromatic/src/categorical/Paired.js");function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _construct(t,e,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];return o.push.apply(o,e),new(t.bind.apply(t,o))}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l);else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}!function styleInject(css,ref){void 0===ref&&(ref={});var insertAt=ref.insertAt;if("undefined"!=typeof document){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css","top"===insertAt&&head.firstChild?head.insertBefore(style,head.firstChild):head.appendChild(style),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css))}}(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .clickable {\n  cursor: pointer;\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");var autoColorScale=(0,d3_scale__WEBPACK_IMPORTED_MODULE_19__.A)(d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_20__.A);function autoColorObjects(objects,colorByAccessor,colorField){colorByAccessor&&"string"==typeof colorField&&objects.filter(function(obj){return!obj[colorField]}).forEach(function(obj){obj[colorField]=autoColorScale(colorByAccessor(obj))})}var notifyRedraw=function notifyRedraw(_,state){return state.onNeedsRedraw&&state.onNeedsRedraw()},updDataPhotons=function updDataPhotons(_,state){if(!state.isShadow){var linkParticlesAccessor=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalParticles);state.graphData.links.forEach(function(link){var numPhotons=Math.round(Math.abs(linkParticlesAccessor(link)));numPhotons?link.__photons=_toConsumableArray(Array(numPhotons)).map(function(){return{}}):delete link.__photons})}},CanvasForceGraph=(0,kapsule__WEBPACK_IMPORTED_MODULE_8__.A)({props:{graphData:{default:{nodes:[],links:[]},onChange:function onChange(_,state){state.engineRunning=!1,updDataPhotons(0,state)}},dagMode:{onChange:function onChange(dagMode,state){!dagMode&&(state.graphData.nodes||[]).forEach(function(n){return n.fx=n.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function _default(node){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:notifyRedraw},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:notifyRedraw},nodeColor:{default:"color",triggerUpdate:!1,onChange:notifyRedraw},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:notifyRedraw},nodeCanvasObjectMode:{default:function _default(){return"replace"},triggerUpdate:!1,onChange:notifyRedraw},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:notifyRedraw},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:notifyRedraw},linkColor:{default:"color",triggerUpdate:!1,onChange:notifyRedraw},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:notifyRedraw},linkWidth:{default:1,triggerUpdate:!1,onChange:notifyRedraw},linkCurvature:{default:0,triggerUpdate:!1,onChange:notifyRedraw},linkCanvasObject:{triggerUpdate:!1,onChange:notifyRedraw},linkCanvasObjectMode:{default:function _default(){return"replace"},triggerUpdate:!1,onChange:notifyRedraw},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:notifyRedraw},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:notifyRedraw},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:notifyRedraw},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:updDataPhotons},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function onChange(alphaDecay,state){state.forceLayout.alphaDecay(alphaDecay)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function onChange(alphaTarget,state){state.forceLayout.alphaTarget(alphaTarget)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function onChange(velocityDecay,state){state.forceLayout.velocityDecay(velocityDecay)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function _default(){},triggerUpdate:!1},onFinishUpdate:{default:function _default(){},triggerUpdate:!1},onEngineTick:{default:function _default(){},triggerUpdate:!1},onEngineStop:{default:function _default(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function d3Force(state,forceName,forceFn){return void 0===forceFn?state.forceLayout.force(forceName):(state.forceLayout.force(forceName,forceFn),this)},d3ReheatSimulation:function d3ReheatSimulation(state){return state.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function resetCountdown(state){return state.cntTicks=0,state.startTickTime=new Date,state.engineRunning=!0,this},isEngineRunning:function isEngineRunning(state){return!!state.engineRunning},tickFrame:function tickFrame(state){return!state.isShadow&&function layoutTick(){state.engineRunning&&(++state.cntTicks>state.cooldownTicks||new Date-state.startTickTime>state.cooldownTime||state.d3AlphaMin>0&&state.forceLayout.alpha()<state.d3AlphaMin?(state.engineRunning=!1,state.onEngineStop()):(state.forceLayout.tick(),state.onEngineTick()))}(),function paintLinks(){var getVisibility=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkVisibility),getColor=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkColor),getWidth=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkWidth),getLineDash=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkLineDash),getCurvature=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkCurvature),getLinkCanvasObjectMode=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkCanvasObjectMode),ctx=state.ctx,padAmount=2*state.isShadow,visibleLinks=state.graphData.links.filter(getVisibility);visibleLinks.forEach(function calcLinkControlPoints(link){var curvature=getCurvature(link);if(!curvature)return void(link.__controlPoints=null);var start=link.source,end=link.target;if(!(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")))return;var l=Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2));if(l>0){var a=Math.atan2(end.y-start.y,end.x-start.x),d=l*curvature,cp={x:(start.x+end.x)/2+d*Math.cos(a-Math.PI/2),y:(start.y+end.y)/2+d*Math.sin(a-Math.PI/2)};link.__controlPoints=[cp.x,cp.y]}else{var _d=70*curvature;link.__controlPoints=[end.x,end.y-_d,end.x+_d,end.y]}});var beforeCustomLinks=[],afterCustomLinks=[],defaultPaintLinks=visibleLinks;if(state.linkCanvasObject){var replaceCustomLinks=[],otherCustomLinks=[];visibleLinks.forEach(function(d){return({before:beforeCustomLinks,after:afterCustomLinks,replace:replaceCustomLinks}[getLinkCanvasObjectMode(d)]||otherCustomLinks).push(d)}),defaultPaintLinks=[].concat(_toConsumableArray(beforeCustomLinks),afterCustomLinks,otherCustomLinks),beforeCustomLinks=beforeCustomLinks.concat(replaceCustomLinks)}ctx.save(),beforeCustomLinks.forEach(function(link){return state.linkCanvasObject(link,ctx,state.globalScale)}),ctx.restore();var linksPerColor=(0,index_array_by__WEBPACK_IMPORTED_MODULE_18__.A)(defaultPaintLinks,[getColor,getWidth,getLineDash]);ctx.save(),Object.entries(linksPerColor).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),color=_ref2[0],linksPerWidth=_ref2[1],lineColor=color&&"undefined"!==color?color:"rgba(0,0,0,0.15)";Object.entries(linksPerWidth).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),width=_ref4[0],linesPerLineDash=_ref4[1],lineWidth=(width||1)/state.globalScale+padAmount;Object.entries(linesPerLineDash).forEach(function(_ref5){var _ref6=_slicedToArray(_ref5,2);_ref6[0];var links=_ref6[1],lineDashSegments=getLineDash(links[0]);ctx.beginPath(),links.forEach(function(link){var start=link.source,end=link.target;if(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")){ctx.moveTo(start.x,start.y);var controlPoints=link.__controlPoints;controlPoints?ctx[2===controlPoints.length?"quadraticCurveTo":"bezierCurveTo"].apply(ctx,_toConsumableArray(controlPoints).concat([end.x,end.y])):ctx.lineTo(end.x,end.y)}}),ctx.strokeStyle=lineColor,ctx.lineWidth=lineWidth,ctx.setLineDash(lineDashSegments||[]),ctx.stroke()})})}),ctx.restore(),ctx.save(),afterCustomLinks.forEach(function(link){return state.linkCanvasObject(link,ctx,state.globalScale)}),ctx.restore()}(),!state.isShadow&&function paintArrows(){var getLength=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalArrowLength),getRelPos=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalArrowRelPos),getVisibility=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkVisibility),getColor=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalArrowColor||state.linkColor),getNodeVal=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeVal),ctx=state.ctx;ctx.save(),state.graphData.links.filter(getVisibility).forEach(function(link){var arrowLength=getLength(link);if(arrowLength&&!(arrowLength<0)){var start=link.source,end=link.target;if(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")){var startR=Math.sqrt(Math.max(0,getNodeVal(start)||1))*state.nodeRelSize,endR=Math.sqrt(Math.max(0,getNodeVal(end)||1))*state.nodeRelSize,arrowRelPos=Math.min(1,Math.max(0,getRelPos(link))),arrowColor=getColor(link)||"rgba(0,0,0,0.28)",arrowHalfWidth=arrowLength/1.6/2,bzLine=link.__controlPoints&&_construct(bezier_js__WEBPACK_IMPORTED_MODULE_17__.w,[start.x,start.y].concat(_toConsumableArray(link.__controlPoints),[end.x,end.y])),getCoordsAlongLine=bzLine?function(t){return bzLine.get(t)}:function(t){return{x:start.x+(end.x-start.x)*t||0,y:start.y+(end.y-start.y)*t||0}},lineLen=bzLine?bzLine.length():Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2)),posAlongLine=startR+arrowLength+(lineLen-startR-endR-arrowLength)*arrowRelPos,arrowHead=getCoordsAlongLine(posAlongLine/lineLen),arrowTail=getCoordsAlongLine((posAlongLine-arrowLength)/lineLen),arrowTailVertex=getCoordsAlongLine((posAlongLine-.8*arrowLength)/lineLen),arrowTailAngle=Math.atan2(arrowHead.y-arrowTail.y,arrowHead.x-arrowTail.x)-Math.PI/2;ctx.beginPath(),ctx.moveTo(arrowHead.x,arrowHead.y),ctx.lineTo(arrowTail.x+arrowHalfWidth*Math.cos(arrowTailAngle),arrowTail.y+arrowHalfWidth*Math.sin(arrowTailAngle)),ctx.lineTo(arrowTailVertex.x,arrowTailVertex.y),ctx.lineTo(arrowTail.x-arrowHalfWidth*Math.cos(arrowTailAngle),arrowTail.y-arrowHalfWidth*Math.sin(arrowTailAngle)),ctx.fillStyle=arrowColor,ctx.fill()}}}),ctx.restore()}(),!state.isShadow&&function paintPhotons(){var getNumPhotons=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalParticles),getSpeed=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalParticleSpeed),getOffset=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalParticleOffset),getDiameter=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalParticleWidth),getVisibility=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkVisibility),getColor=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkDirectionalParticleColor||state.linkColor),ctx=state.ctx;ctx.save(),state.graphData.links.filter(getVisibility).forEach(function(link){var numCyclePhotons=getNumPhotons(link);if(link.hasOwnProperty("__photons")&&link.__photons.length){var start=link.source,end=link.target;if(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")){var particleSpeed=getSpeed(link),particleOffset=Math.abs(getOffset(link)),photons=link.__photons||[],photonR=Math.max(0,getDiameter(link)/2)/Math.sqrt(state.globalScale),photonColor=getColor(link)||"rgba(0,0,0,0.28)";ctx.fillStyle=photonColor;var bzLine=link.__controlPoints?_construct(bezier_js__WEBPACK_IMPORTED_MODULE_17__.w,[start.x,start.y].concat(_toConsumableArray(link.__controlPoints),[end.x,end.y])):null,cyclePhotonIdx=0,needsCleanup=!1;photons.forEach(function(photon){var singleHop=!!photon.__singleHop;if(photon.hasOwnProperty("__progressRatio")||(photon.__progressRatio=singleHop?0:(cyclePhotonIdx+particleOffset)/numCyclePhotons),!singleHop&&cyclePhotonIdx++,photon.__progressRatio+=particleSpeed,photon.__progressRatio>=1){if(singleHop)return void(needsCleanup=!0);photon.__progressRatio=photon.__progressRatio%1}var photonPosRatio=photon.__progressRatio,coords=bzLine?bzLine.get(photonPosRatio):{x:start.x+(end.x-start.x)*photonPosRatio||0,y:start.y+(end.y-start.y)*photonPosRatio||0};state.linkDirectionalParticleCanvasObject?state.linkDirectionalParticleCanvasObject(coords.x,coords.y,link,ctx,state.globalScale):(ctx.beginPath(),ctx.arc(coords.x,coords.y,photonR,0,2*Math.PI,!1),ctx.fill())}),needsCleanup&&(link.__photons=link.__photons.filter(function(photon){return!photon.__singleHop||photon.__progressRatio<=1}))}}}),ctx.restore()}(),function paintNodes(){var getVisibility=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeVisibility),getVal=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeVal),getColor=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeColor),getNodeCanvasObjectMode=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeCanvasObjectMode),ctx=state.ctx,padAmount=state.isShadow/state.globalScale,visibleNodes=state.graphData.nodes.filter(getVisibility);ctx.save(),visibleNodes.forEach(function(node){var nodeCanvasObjectMode=getNodeCanvasObjectMode(node);if(!state.nodeCanvasObject||"before"!==nodeCanvasObjectMode&&"replace"!==nodeCanvasObjectMode||(state.nodeCanvasObject(node,ctx,state.globalScale),"replace"!==nodeCanvasObjectMode)){var r=Math.sqrt(Math.max(0,getVal(node)||1))*state.nodeRelSize+padAmount;ctx.beginPath(),ctx.arc(node.x,node.y,r,0,2*Math.PI,!1),ctx.fillStyle=getColor(node)||"rgba(31, 120, 180, 0.92)",ctx.fill(),state.nodeCanvasObject&&"after"===nodeCanvasObjectMode&&state.nodeCanvasObject(node,state.ctx,state.globalScale)}else ctx.restore()}),ctx.restore()}(),this},emitParticle:function emitParticle(state,link){return link&&(!link.__photons&&(link.__photons=[]),link.__photons.push({__singleHop:!0})),this}},stateInit:function stateInit(){return{forceLayout:(0,d3_force_3d__WEBPACK_IMPORTED_MODULE_16__.A)().force("link",(0,d3_force_3d__WEBPACK_IMPORTED_MODULE_13__.A)()).force("charge",(0,d3_force_3d__WEBPACK_IMPORTED_MODULE_14__.A)()).force("center",(0,d3_force_3d__WEBPACK_IMPORTED_MODULE_12__.A)()).force("dagRadial",null).stop(),engineRunning:!1}},init:function init(canvasCtx,state){state.ctx=canvasCtx},update:function update(state,changedProps){state.engineRunning=!1,state.onUpdate(),null!==state.nodeAutoColorBy&&autoColorObjects(state.graphData.nodes,(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeAutoColorBy),state.nodeColor),null!==state.linkAutoColorBy&&autoColorObjects(state.graphData.links,(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkAutoColorBy),state.linkColor),state.graphData.links.forEach(function(link){link.source=link[state.linkSource],link.target=link[state.linkTarget]}),state.forceLayout.stop().alpha(1).nodes(state.graphData.nodes);var linkForce=state.forceLayout.force("link");linkForce&&linkForce.id(function(d){return d[state.nodeId]}).links(state.graphData.links);var nodeDepths=state.dagMode&&function getDagDepths(_ref,idAccessor){var nodes=_ref.nodes,links=_ref.links,_ref2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref2$nodeFilter=_ref2.nodeFilter,nodeFilter=void 0===_ref2$nodeFilter?function(){return!0}:_ref2$nodeFilter,_ref2$onLoopError=_ref2.onLoopError,onLoopError=void 0===_ref2$onLoopError?function(loopIds){throw"Invalid DAG structure! Found cycle in node path: ".concat(loopIds.join(" -> "),".")}:_ref2$onLoopError,graph={};nodes.forEach(function(node){return graph[idAccessor(node)]={data:node,out:[],depth:-1,skip:!nodeFilter(node)}}),links.forEach(function(_ref3){var source=_ref3.source,target=_ref3.target,sourceId=getNodeId(source),targetId=getNodeId(target);if(!graph.hasOwnProperty(sourceId))throw"Missing source node with id: ".concat(sourceId);if(!graph.hasOwnProperty(targetId))throw"Missing target node with id: ".concat(targetId);var sourceNode=graph[sourceId],targetNode=graph[targetId];function getNodeId(node){return"object"===_typeof(node)?idAccessor(node):node}sourceNode.out.push(targetNode)});var foundLoops=[];return function traverse(nodes){for(var nodeStack=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],currentDepth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_loop=function _loop(){var node=nodes[i];if(-1!==nodeStack.indexOf(node)){var loop=[].concat(_toConsumableArray(nodeStack.slice(nodeStack.indexOf(node))),[node]).map(function(d){return idAccessor(d.data)});return foundLoops.some(function(foundLoop){return foundLoop.length===loop.length&&foundLoop.every(function(id,idx){return id===loop[idx]})})||(foundLoops.push(loop),onLoopError(loop)),1}currentDepth>node.depth&&(node.depth=currentDepth,traverse(node.out,[].concat(_toConsumableArray(nodeStack),[node]),currentDepth+(node.skip?0:1)))},i=0,l=nodes.length;i<l;i++)_loop()}(Object.values(graph)),Object.assign.apply(Object,[{}].concat(_toConsumableArray(Object.entries(graph).filter(function(_ref4){return!_slicedToArray(_ref4,2)[1].skip}).map(function(_ref6){var _ref7=_slicedToArray(_ref6,2);return _defineProperty({},_ref7[0],_ref7[1].depth)}))))}(state.graphData,function(node){return node[state.nodeId]},{nodeFilter:state.dagNodeFilter,onLoopError:state.onDagError||void 0}),maxDepth=Math.max.apply(Math,_toConsumableArray(Object.values(nodeDepths||[]))),dagLevelDistance=state.dagLevelDistance||state.graphData.nodes.length/(maxDepth||1)*2*(-1!==["radialin","radialout"].indexOf(state.dagMode)?.7:1);if(["lr","rl","td","bu"].includes(changedProps.dagMode)){var resetProp=["lr","rl"].includes(changedProps.dagMode)?"fx":"fy";state.graphData.nodes.filter(state.dagNodeFilter).forEach(function(node){return delete node[resetProp]})}if(["lr","rl","td","bu"].includes(state.dagMode)){var invert=["rl","bu"].includes(state.dagMode),_resetProp=["lr","rl"].includes(state.dagMode)?"fx":"fy";state.graphData.nodes.filter(state.dagNodeFilter).forEach(function(node){return node[_resetProp]=function fixFn(node){return(nodeDepths[node[state.nodeId]]-maxDepth/2)*dagLevelDistance*(invert?-1:1)}(node)})}state.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(state.dagMode)?(0,d3_force_3d__WEBPACK_IMPORTED_MODULE_15__.A)(function(node){var nodeDepth=nodeDepths[node[state.nodeId]]||-1;return("radialin"===state.dagMode?maxDepth-nodeDepth:nodeDepth)*dagLevelDistance}).strength(function(node){return state.dagNodeFilter(node)?1:0}):null);for(var i=0;i<state.warmupTicks&&!(state.d3AlphaMin>0&&state.forceLayout.alpha()<state.d3AlphaMin);i++)state.forceLayout.tick();this.resetCountdown(),state.onFinishUpdate()}});function linkKapsule(kapsulePropNames,kapsuleType){var propNames=kapsulePropNames instanceof Array?kapsulePropNames:[kapsulePropNames],dummyK=new kapsuleType;return dummyK._destructor&&dummyK._destructor(),{linkProp:function linkProp(prop){return{default:dummyK[prop](),onChange:function onChange(v,state){propNames.forEach(function(propName){return state[propName][prop](v)})},triggerUpdate:!1}},linkMethod:function linkMethod(method){return function(state){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var returnVals=[];return propNames.forEach(function(propName){var kapsuleInstance=state[propName],returnVal=kapsuleInstance[method].apply(kapsuleInstance,args);returnVal!==kapsuleInstance&&returnVals.push(returnVal)}),returnVals.length?returnVals[0]:this}}}}var bindFG=linkKapsule("forceGraph",CanvasForceGraph),bindBoth=linkKapsule(["forceGraph","shadowGraph"],CanvasForceGraph),linkedProps=Object.assign.apply(Object,_toConsumableArray(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(p){return _defineProperty({},p,bindFG.linkProp(p))})).concat(_toConsumableArray(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(p){return _defineProperty({},p,bindBoth.linkProp(p))})))),linkedMethods=Object.assign.apply(Object,_toConsumableArray(["d3Force","d3ReheatSimulation","emitParticle"].map(function(p){return _defineProperty({},p,bindFG.linkMethod(p))})));function adjustCanvasSize(state){if(state.canvas){var curWidth=state.canvas.width,curHeight=state.canvas.height;300===curWidth&&150===curHeight&&(curWidth=curHeight=0);var pxScale=window.devicePixelRatio;curWidth/=pxScale,curHeight/=pxScale,[state.canvas,state.shadowCanvas].forEach(function(canvas){canvas.style.width="".concat(state.width,"px"),canvas.style.height="".concat(state.height,"px"),canvas.width=state.width*pxScale,canvas.height=state.height*pxScale,curWidth||curHeight||canvas.getContext("2d").scale(pxScale,pxScale)});var k=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas).k;state.zoom.translateBy(state.zoom.__baseElem,(state.width-curWidth)/2/k,(state.height-curHeight)/2/k),state.needsRedraw=!0}}function resetTransform(ctx){var pxRatio=window.devicePixelRatio;ctx.setTransform(pxRatio,0,0,pxRatio,0,0)}function clearCanvas(ctx,width,height){ctx.save(),resetTransform(ctx),ctx.clearRect(0,0,width,height),ctx.restore()}var forceGraph=(0,kapsule__WEBPACK_IMPORTED_MODULE_8__.A)({props:_objectSpread2({width:{default:window.innerWidth,onChange:function onChange(_,state){return adjustCanvasSize(state)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function onChange(_,state){return adjustCanvasSize(state)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function onChange(d,state){[d.nodes,d.links].every(function(arr){return(arr||[]).every(function(d){return!d.hasOwnProperty("__indexColor")})})&&state.colorTracker.reset(),[{type:"Node",objs:d.nodes},{type:"Link",objs:d.links}].forEach(function hexIndex(_ref4){var type=_ref4.type;_ref4.objs.filter(function(d){if(!d.hasOwnProperty("__indexColor"))return!0;var cur=state.colorTracker.lookup(d.__indexColor);return!cur||!cur.hasOwnProperty("d")||cur.d!==d}).forEach(function(d){d.__indexColor=state.colorTracker.register({type,d})})}),state.forceGraph.graphData(d),state.shadowGraph.graphData(d)},triggerUpdate:!1},backgroundColor:{onChange:function onChange(color,state){state.canvas&&color&&(state.canvas.style.background=color)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function onChange(paintFn,state){state.shadowGraph.nodeCanvasObject(paintFn?function(node,ctx,globalScale){return paintFn(node,node.__indexColor,ctx,globalScale)}:null),state.flushShadowCanvas&&state.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function onChange(paintFn,state){state.shadowGraph.linkCanvasObject(paintFn?function(link,ctx,globalScale){return paintFn(link,link.__indexColor,ctx,globalScale)}:null),state.flushShadowCanvas&&state.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function onChange(minZoom,state){state.zoom.scaleExtent([minZoom,state.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function onChange(maxZoom,state){state.zoom.scaleExtent([state.zoom.scaleExtent()[0],maxZoom])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function onChange(_,state){state.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function _default(){},triggerUpdate:!1},onNodeDragEnd:{default:function _default(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},linkedProps),aliases:{stopAnimation:"pauseAnimation"},methods:_objectSpread2({graph2ScreenCoords:function graph2ScreenCoords(state,x,y){var t=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas);return{x:x*t.k+t.x,y:y*t.k+t.y}},screen2GraphCoords:function screen2GraphCoords(state,x,y){var t=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas);return{x:(x-t.x)/t.k,y:(y-t.y)/t.k}},centerAt:function centerAt(state,x,y,transitionDuration){if(!state.canvas)return null;if(void 0!==x||void 0!==y){var finalPos=Object.assign({},void 0!==x?{x}:{},void 0!==y?{y}:{});return transitionDuration?state.tweenGroup.add(new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__.K(getCenter()).to(finalPos,transitionDuration).easing(_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__.GS.Quadratic.Out).onUpdate(setCenter).start()):setCenter(finalPos),this}return getCenter();function getCenter(){var t=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas);return{x:(state.width/2-t.x)/t.k,y:(state.height/2-t.y)/t.k}}function setCenter(_ref5){var x=_ref5.x,y=_ref5.y;state.zoom.translateTo(state.zoom.__baseElem,void 0===x?getCenter().x:x,void 0===y?getCenter().y:y),state.needsRedraw=!0}},zoom:function zoom(state,k,transitionDuration){return state.canvas?void 0!==k?(transitionDuration?state.tweenGroup.add(new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__.K({k:getZoom()}).to({k},transitionDuration).easing(_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__.GS.Quadratic.Out).onUpdate(function(_ref6){return setZoom(_ref6.k)}).start()):setZoom(k),this):getZoom():null;function getZoom(){return(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas).k}function setZoom(k){state.zoom.scaleTo(state.zoom.__baseElem,k),state.needsRedraw=!0}},zoomToFit:function zoomToFit(state){for(var transitionDuration=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,padding=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,_len=arguments.length,bboxArgs=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)bboxArgs[_key-3]=arguments[_key];var bbox=this.getGraphBbox.apply(this,bboxArgs);if(bbox){var center={x:(bbox.x[0]+bbox.x[1])/2,y:(bbox.y[0]+bbox.y[1])/2},zoomK=Math.max(1e-12,Math.min(1e12,(state.width-2*padding)/(bbox.x[1]-bbox.x[0]),(state.height-2*padding)/(bbox.y[1]-bbox.y[0])));this.centerAt(center.x,center.y,transitionDuration),this.zoom(zoomK,transitionDuration)}return this},getGraphBbox:function getGraphBbox(state){var nodeFilter=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},getVal=(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.nodeVal),getR=function getR(node){return Math.sqrt(Math.max(0,getVal(node)||1))*state.nodeRelSize},nodesPos=state.graphData.nodes.filter(nodeFilter).map(function(node){return{x:node.x,y:node.y,r:getR(node)}});return nodesPos.length?{x:[(0,d3_array__WEBPACK_IMPORTED_MODULE_4__.A)(nodesPos,function(node){return node.x-node.r}),(0,d3_array__WEBPACK_IMPORTED_MODULE_3__.A)(nodesPos,function(node){return node.x+node.r})],y:[(0,d3_array__WEBPACK_IMPORTED_MODULE_4__.A)(nodesPos,function(node){return node.y-node.r}),(0,d3_array__WEBPACK_IMPORTED_MODULE_3__.A)(nodesPos,function(node){return node.y+node.r})]}:null},pauseAnimation:function pauseAnimation(state){return state.animationFrameRequestId&&(cancelAnimationFrame(state.animationFrameRequestId),state.animationFrameRequestId=null),this},resumeAnimation:function resumeAnimation(state){return state.animationFrameRequestId||this._animationCycle(),this},_destructor:function _destructor(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},linkedMethods),stateInit:function stateInit(){return{lastSetZoom:1,zoom:(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__.s_)(),forceGraph:new CanvasForceGraph,shadowGraph:(new CanvasForceGraph).cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new canvas_color_tracker__WEBPACK_IMPORTED_MODULE_10__.A,tweenGroup:new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__.YJ}},init:function init(domNode,state){var _this=this;domNode.innerHTML="";var container=document.createElement("div");container.classList.add("force-graph-container"),container.style.position="relative",domNode.appendChild(container),state.canvas=document.createElement("canvas"),state.backgroundColor&&(state.canvas.style.background=state.backgroundColor),container.appendChild(state.canvas),state.shadowCanvas=document.createElement("canvas");var ctx=state.canvas.getContext("2d"),shadowCtx=state.shadowCanvas.getContext("2d",{willReadFrequently:!0}),pointerPos={x:-1e12,y:-1e12},getObjUnderPointer=function getObjUnderPointer(){var obj=null,pxScale=window.devicePixelRatio,px=pointerPos.x>0&&pointerPos.y>0?shadowCtx.getImageData(pointerPos.x*pxScale,pointerPos.y*pxScale,1,1):null;return px&&(obj=state.colorTracker.lookup(px.data)),obj};(0,d3_selection__WEBPACK_IMPORTED_MODULE_0__.A)(state.canvas).call((0,d3_drag__WEBPACK_IMPORTED_MODULE_2__.A)().subject(function(){if(!state.enableNodeDrag)return null;var obj=getObjUnderPointer();return obj&&"Node"===obj.type?obj.d:null}).on("start",function(ev){var obj=ev.subject;obj.__initialDragPos={x:obj.x,y:obj.y,fx:obj.fx,fy:obj.fy},ev.active||(obj.fx=obj.x,obj.fy=obj.y),state.canvas.classList.add("grabbable")}).on("drag",function(ev){var obj=ev.subject,initPos=obj.__initialDragPos,dragPos=ev,k=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas).k,translate={x:initPos.x+(dragPos.x-initPos.x)/k-obj.x,y:initPos.y+(dragPos.y-initPos.y)/k-obj.y};["x","y"].forEach(function(c){return obj["f".concat(c)]=obj[c]=initPos[c]+(dragPos[c]-initPos[c])/k}),!obj.__dragged&&5>=Math.sqrt((0,d3_array__WEBPACK_IMPORTED_MODULE_5__.A)(["x","y"].map(function(k){return Math.pow(ev[k]-initPos[k],2)})))||(state.forceGraph.d3AlphaTarget(.3).resetCountdown(),state.isPointerDragging=!0,obj.__dragged=!0,state.onNodeDrag(obj,translate))}).on("end",function(ev){var obj=ev.subject,initPos=obj.__initialDragPos,translate={x:obj.x-initPos.x,y:obj.y-initPos.y};void 0===initPos.fx&&(obj.fx=void 0),void 0===initPos.fy&&(obj.fy=void 0),delete obj.__initialDragPos,state.forceGraph.d3AlphaTarget()&&state.forceGraph.d3AlphaTarget(0).resetCountdown(),state.canvas.classList.remove("grabbable"),state.isPointerDragging=!1,obj.__dragged&&(delete obj.__dragged,state.onNodeDragEnd(obj,translate))})),state.zoom(state.zoom.__baseElem=(0,d3_selection__WEBPACK_IMPORTED_MODULE_0__.A)(state.canvas)),state.zoom.__baseElem.on("dblclick.zoom",null),state.zoom.filter(function(ev){return!ev.button&&state.enableZoomPanInteraction&&("wheel"!==ev.type||(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.enableZoomInteraction)(ev))&&("wheel"===ev.type||(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.enablePanInteraction)(ev))}).on("zoom",function(ev){var t=ev.transform;[ctx,shadowCtx].forEach(function(c){resetTransform(c),c.translate(t.x,t.y),c.scale(t.k,t.k)}),state.isPointerDragging=!0,state.onZoom&&state.onZoom(_objectSpread2(_objectSpread2({},t),_this.centerAt())),state.needsRedraw=!0}).on("end",function(ev){state.isPointerDragging=!1,state.onZoomEnd&&state.onZoomEnd(_objectSpread2(_objectSpread2({},ev.transform),_this.centerAt()))}),adjustCanvasSize(state),state.forceGraph.onNeedsRedraw(function(){return state.needsRedraw=!0}).onFinishUpdate(function(){(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas).k===state.lastSetZoom&&state.graphData.nodes.length&&(state.zoom.scaleTo(state.zoom.__baseElem,state.lastSetZoom=4/Math.cbrt(state.graphData.nodes.length)),state.needsRedraw=!0)}),state.tooltip=new float_tooltip__WEBPACK_IMPORTED_MODULE_11__.A(container),["pointermove","pointerdown"].forEach(function(evType){return container.addEventListener(evType,function(ev){"pointerdown"===evType&&(state.isPointerPressed=!0,state.pointerDownEvent=ev),!state.isPointerDragging&&"pointermove"===ev.type&&state.onBackgroundClick&&(ev.pressure>0||state.isPointerPressed)&&("mouse"===ev.pointerType||void 0===ev.movementX||[ev.movementX,ev.movementY].some(function(m){return Math.abs(m)>1}))&&(state.isPointerDragging=!0);var offset=function getOffset(el){var rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}}(container);pointerPos.x=ev.pageX-offset.left,pointerPos.y=ev.pageY-offset.top},{passive:!0})}),container.addEventListener("pointerup",function(ev){if(state.isPointerPressed)if(state.isPointerPressed=!1,state.isPointerDragging)state.isPointerDragging=!1;else{var cbEvents=[ev,state.pointerDownEvent];requestAnimationFrame(function(){if(0===ev.button)if(state.hoverObj){var fn=state["on".concat(state.hoverObj.type,"Click")];fn&&fn.apply(void 0,[state.hoverObj.d].concat(cbEvents))}else state.onBackgroundClick&&state.onBackgroundClick.apply(state,cbEvents);if(2===ev.button)if(state.hoverObj){var _fn=state["on".concat(state.hoverObj.type,"RightClick")];_fn&&_fn.apply(void 0,[state.hoverObj.d].concat(cbEvents))}else state.onBackgroundRightClick&&state.onBackgroundRightClick.apply(state,cbEvents)})}},{passive:!0}),container.addEventListener("contextmenu",function(ev){return!(state.onBackgroundRightClick||state.onNodeRightClick||state.onLinkRightClick)||(ev.preventDefault(),!1)}),state.forceGraph(ctx),state.shadowGraph(shadowCtx);var refreshShadowCanvas=(0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.A)(function(){clearCanvas(shadowCtx,state.width,state.height),state.shadowGraph.linkWidth(function(l){return(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.linkWidth)(l)+state.linkHoverPrecision});var t=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas);state.shadowGraph.globalScale(t.k).tickFrame()},800);state.flushShadowCanvas=refreshShadowCanvas.flush,(this._animationCycle=function animate(){var doRedraw=!state.autoPauseRedraw||!!state.needsRedraw||state.forceGraph.isEngineRunning()||state.graphData.links.some(function(d){return d.__photons&&d.__photons.length});if(state.needsRedraw=!1,state.enablePointerInteraction){var obj=state.isPointerDragging?null:getObjUnderPointer();if(obj!==state.hoverObj){var prevObj=state.hoverObj,prevObjType=prevObj?prevObj.type:null,objType=obj?obj.type:null;if(prevObjType&&prevObjType!==objType){var fn=state["on".concat(prevObjType,"Hover")];fn&&fn(null,prevObj.d)}if(objType){var _fn2=state["on".concat(objType,"Hover")];_fn2&&_fn2(obj.d,prevObjType===objType?prevObj.d:null)}state.tooltip.content(obj&&(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state["".concat(obj.type.toLowerCase(),"Label")])(obj.d)||null),state.canvas.classList[(obj&&state["on".concat(objType,"Click")]||!obj&&state.onBackgroundClick)&&(0,accessor_fn__WEBPACK_IMPORTED_MODULE_9__.A)(state.showPointerCursor)(null==obj?void 0:obj.d)?"add":"remove"]("clickable"),state.hoverObj=obj}doRedraw&&refreshShadowCanvas()}if(doRedraw){clearCanvas(ctx,state.width,state.height);var globalScale=(0,d3_zoom__WEBPACK_IMPORTED_MODULE_1__._V)(state.canvas).k;state.onRenderFramePre&&state.onRenderFramePre(ctx,globalScale),state.forceGraph.globalScale(globalScale).tickFrame(),state.onRenderFramePost&&state.onRenderFramePost(ctx,globalScale)}state.tweenGroup.update(),state.animationFrameRequestId=requestAnimationFrame(animate)})()},update:function updateFn(state){}})}}]);