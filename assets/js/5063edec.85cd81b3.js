"use strict";(globalThis.webpackChunkbytesofpurpose_blog=globalThis.webpackChunkbytesofpurpose_blog||[]).push([[2310],{14782:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/files/main-0df2cd5ffa4c98bce6fc506841351c90.ts"},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(96540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}},61870:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/files/GraphRenderer-6a9371192e43a3a013119c505d15b2f3.tsx"},67598:e=>{e.exports=JSON.parse('{"permalink":"/changelog/development/2025-XX-XX-optimization-bundle-size-storybook","editUrl":"https://github.com/omars-lab/omars-lab.github.io/edit/master/bytesofpurpose-blog/changelog/changelog/development/2025-XX-XX-optimization-bundle-size-storybook.md","source":"@site/changelog/development/2025-XX-XX-optimization-bundle-size-storybook.md","title":"Bundle Size Optimization","description":"Optimize bundle sizes and load times for Storybook and the blog to improve web performance","date":"2025-11-18T15:48:34.000Z","tags":[],"readingTime":2.54,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Bundle Size Optimization","description":"Optimize bundle sizes and load times for Storybook and the blog to improve web performance","status":"in-progress","inception_date":"2025-01-20","execution_date":"2025-01-20","type":"optimization","component":"Storybook","priority":"high"},"unlisted":false,"prevItem":{"title":"Blogging Mechanism - SEO","permalink":"/changelog/development/2025-XX-XX-mechanic-establishment-seo"},"nextItem":{"title":"Plan - Leveraging GenAI to Enhance Blog","permalink":"/changelog/development/2025-XX-XX-plan-leveraging-genai-enhance-blog"}}')},78551:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});var s=i(67598),r=i(74848),l=i(28453);const t={title:"Bundle Size Optimization",description:"Optimize bundle sizes and load times for Storybook and the blog to improve web performance",status:"in-progress",inception_date:"2025-01-20",execution_date:"2025-01-20",type:"optimization",component:"Storybook",priority:"high"},o="Bundle Size Optimization",d={authorsImageUrls:[]},a=[{value:"Execution Plan",id:"execution-plan",level:2},{value:"Goals",id:"goals",level:3},{value:"Areas to Optimize",id:"areas-to-optimize",level:3},{value:"Execution Results / Attempts",id:"execution-results--attempts",level:2},{value:"\u2705 Initial Webpack Optimization (2025-01-20)",id:"-initial-webpack-optimization-2025-01-20",level:3},{value:"Next Steps",id:"next-steps",level:3},{value:"Related Links",id:"related-links",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"execution-plan",children:"Execution Plan"}),"\n",(0,r.jsx)(n.p,{children:"Optimize bundle sizes and load times for both Storybook and the main blog to improve web performance:"}),"\n",(0,r.jsx)(n.h3,{id:"goals",children:"Goals"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reduce Storybook bundle sizes"})," - Currently seeing warnings for large bundles (1.41 MiB for force-graph libraries)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Improve initial load time"})," - Reduce time to first paint and interactive"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Better code splitting"})," - Ensure heavy libraries load only when needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize caching"})," - Separate chunks for better browser caching"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"areas-to-optimize",children:"Areas to Optimize"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storybook Build"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Large bundles: ",(0,r.jsx)(n.code,{children:"70.fd609f3c.iframe.bundle.js"})," (1.41 MiB), ",(0,r.jsx)(n.code,{children:"878.38cfd5e5.iframe.bundle.js"})," (983 KiB)"]}),"\n",(0,r.jsx)(n.li,{children:"Main entrypoint: 1.43 MiB combined"}),"\n",(0,r.jsxs)(n.li,{children:["Force-graph libraries (",(0,r.jsx)(n.code,{children:"react-force-graph-2d"}),", ",(0,r.jsx)(n.code,{children:"d3-force"}),") are heavy and should be code-split"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Docusaurus Blog Build"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optimize production bundle sizes"}),"\n",(0,r.jsx)(n.li,{children:"Ensure proper tree-shaking"}),"\n",(0,r.jsx)(n.li,{children:"Lazy load heavy components (Graph component)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Webpack Configuration"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configure code splitting for better chunk separation"}),"\n",(0,r.jsx)(n.li,{children:"Optimize chunk sizes and caching strategies"}),"\n",(0,r.jsx)(n.li,{children:"Enable tree-shaking and dead code elimination"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"execution-results--attempts",children:"Execution Results / Attempts"}),"\n",(0,r.jsx)(n.h3,{id:"-initial-webpack-optimization-2025-01-20",children:"\u2705 Initial Webpack Optimization (2025-01-20)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What We Tried:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Added webpack code splitting configuration"})," in ",(0,r.jsx)(n.code,{children:".storybook/main.ts"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Configured ",(0,r.jsx)(n.code,{children:"splitChunks"})," to separate large libraries into their own chunks"]}),"\n",(0,r.jsxs)(n.li,{children:["Created separate chunks for ",(0,r.jsx)(n.code,{children:"force-graph"})," libraries (",(0,r.jsx)(n.code,{children:"react-force-graph-2d"}),", ",(0,r.jsx)(n.code,{children:"d3-force"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Separated Storybook addons into their own chunks"}),"\n",(0,r.jsxs)(n.li,{children:["Set ",(0,r.jsx)(n.code,{children:"usedExports: true"})," to enable tree-shaking"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Chunk Separation Strategy:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"forceGraph: {\n  name: 'force-graph',\n  test: /[\\\\/]node_modules[\\\\/](react-force-graph|force-graph|d3-)[\\\\/]/,\n  chunks: 'all',\n  priority: 30,\n  enforce: true,\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Results:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Code splitting configuration added successfully"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Force-graph libraries are now in separate chunks"}),"\n",(0,r.jsx)(n.li,{children:"\u26a0\ufe0f Bundle size warnings still present (expected - these are large libraries)"}),"\n",(0,r.jsx)(n.li,{children:"\u26a0\ufe0f Main entrypoint still shows 1.43 MiB (includes runtime + main bundle)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What Worked:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Webpack configuration successfully merged with Storybook's existing optimization settings"}),"\n",(0,r.jsx)(n.li,{children:"Chunk separation is working - force-graph libraries are isolated"}),"\n",(0,r.jsx)(n.li,{children:"Configuration is non-breaking and merges safely with Storybook defaults"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What Didn't Work / Limitations:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Bundle size warnings persist because:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"react-force-graph-2d"})," and ",(0,r.jsx)(n.code,{children:"d3-force"})," are inherently large libraries (~1.4 MiB)"]}),"\n",(0,r.jsx)(n.li,{children:"Storybook itself bundles many development dependencies"}),"\n",(0,r.jsx)(n.li,{children:"These are dev tools, so absolute bundle size is less critical than production"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"The warnings are informational - Storybook is primarily a development tool"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Current Status:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Code splitting is configured and working"}),"\n",(0,r.jsx)(n.li,{children:"Large libraries are properly isolated into separate chunks"}),"\n",(0,r.jsx)(n.li,{children:"Bundle size warnings remain but are expected for heavy libraries"}),"\n",(0,r.jsxs)(n.li,{children:["Further optimization would require:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Lazy loading stories that use heavy components"}),"\n",(0,r.jsx)(n.li,{children:"Removing unused Storybook addons"}),"\n",(0,r.jsx)(n.li,{children:"Considering alternative lighter libraries (if available)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Lazy Load Heavy Stories"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Only load Graph stories when they're actually viewed"}),"\n",(0,r.jsx)(n.li,{children:"Use React.lazy() or dynamic imports for Graph component stories"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Review Storybook Addons"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Audit which addons are actually used"}),"\n",(0,r.jsxs)(n.li,{children:["Remove unused addons (",(0,r.jsx)(n.code,{children:"@storybook/addon-interactions"}),", ",(0,r.jsx)(n.code,{children:"@storybook/addon-links"})," if not needed)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Docusaurus Production Optimization"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Apply similar code splitting strategies to Docusaurus build"}),"\n",(0,r.jsx)(n.li,{children:"Ensure Graph component is lazy-loaded in production"}),"\n",(0,r.jsx)(n.li,{children:"Optimize CSS bundle sizes"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitor and Measure"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Track bundle sizes over time"}),"\n",(0,r.jsx)(n.li,{children:"Measure actual load times (not just bundle sizes)"}),"\n",(0,r.jsx)(n.li,{children:"Use Lighthouse/WebPageTest for real-world performance metrics"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-links",children:"Related Links"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(14782).A+"",children:"Storybook Webpack Config"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:i(61870).A+"",children:"Graph Component"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"../2025-XX-XX-infrastructure-improvement-performance.md",children:"Performance Optimization Entry"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);