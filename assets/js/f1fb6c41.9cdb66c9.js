"use strict";(globalThis.webpackChunkbytesofpurpose_blog=globalThis.webpackChunkbytesofpurpose_blog||[]).push([[37423],{13652:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var i=s(34192),r=s(74848),l=s(28453);const o={slug:"storybook-typescript-babel-setup",title:"\ud83d\udd27 Storybook + TypeScript + Babel: Understanding the Build Pipeline",description:"A deep dive into configuring Storybook with TypeScript and Babel, explaining how webpack, babel-loader, and TypeScript work together in the build process.",authors:["oeid"],tags:["storybook","typescript","babel","webpack","build-systems","frontend"],date:"2025-11-16T10:00",draft:!1},t=void 0,c={authorsImageUrls:[void 0]},d=[{value:"The Problem",id:"the-problem",level:2},{value:"The Solution: A Unified Babel Configuration",id:"the-solution-a-unified-babel-configuration",level:2},{value:"1. Babel Configuration (<code>babel.config.js</code>)",id:"1-babel-configuration-babelconfigjs",level:3},{value:"2. Storybook Configuration (<code>.storybook/main.ts</code>)",id:"2-storybook-configuration-storybookmaints",level:3},{value:"3. TypeScript Configuration (<code>tsconfig.json</code>)",id:"3-typescript-configuration-tsconfigjson",level:3},{value:"How the Build Process Works",id:"how-the-build-process-works",level:2},{value:"Step-by-Step Execution Flow",id:"step-by-step-execution-flow",level:3},{value:"The Build Pipeline Architecture",id:"the-build-pipeline-architecture",level:3},{value:"Understanding TypeScript and Babel: A Layman&#39;s Guide",id:"understanding-typescript-and-babel-a-laymans-guide",level:2},{value:"What is TypeScript?",id:"what-is-typescript",level:3},{value:"What is Babel?",id:"what-is-babel",level:3},{value:"How They Work Together",id:"how-they-work-together",level:3},{value:"The Complete Picture: From Source to Browser",id:"the-complete-picture-from-source-to-browser",level:3},{value:"Layman&#39;s Guide to All Tools",id:"laymans-guide-to-all-tools",level:2},{value:"The Writing Tools (Development)",id:"the-writing-tools-development",level:3},{value:"The Assembly Line (Build System)",id:"the-assembly-line-build-system",level:3},{value:"The Presentation Tools (Development Environment)",id:"the-presentation-tools-development-environment",level:3},{value:"The Configuration Files",id:"the-configuration-files",level:3},{value:"How They All Work Together: The Complete Picture",id:"how-they-all-work-together-the-complete-picture",level:3},{value:"The Toolchain: What Each Component Does",id:"the-toolchain-what-each-component-does",level:2},{value:"Core Build Tools",id:"core-build-tools",level:3},{value:"1. <strong>TypeScript</strong> (<code>tsconfig.json</code>)",id:"1-typescript-tsconfigjson",level:4},{value:"2. <strong>Babel</strong> (<code>babel.config.js</code> + <code>babel-loader</code>)",id:"2-babel-babelconfigjs--babel-loader",level:4},{value:"3. <strong>Webpack</strong>",id:"3-webpack",level:4},{value:"4. <strong>babel-loader</strong>",id:"4-babel-loader",level:4},{value:"Development Tools",id:"development-tools",level:3},{value:"5. <strong>Storybook</strong>",id:"5-storybook",level:4},{value:"6. <strong>Storybook CSF Plugin</strong>",id:"6-storybook-csf-plugin",level:4},{value:"7. <strong>Docusaurus</strong>",id:"7-docusaurus",level:4},{value:"Configuration Files",id:"configuration-files",level:3},{value:"8. <strong><code>babel.config.js</code></strong>",id:"8-babelconfigjs",level:4},{value:"9. <strong><code>tsconfig.json</code></strong>",id:"9-tsconfigjson",level:4},{value:"10. <strong><code>.storybook/main.ts</code></strong>",id:"10-storybookmaints",level:4},{value:"Tool Interaction Summary",id:"tool-interaction-summary",level:3},{value:"Understanding the Dependencies",id:"understanding-the-dependencies",level:2},{value:"Tool Responsibilities",id:"tool-responsibilities",level:3},{value:"Why Order Matters",id:"why-order-matters",level:3},{value:"The Complete Setup",id:"the-complete-setup",level:2},{value:"File Structure",id:"file-structure",level:3},{value:"Configuration Files",id:"configuration-files-1",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"\u274c Wrong: Adding rule at the end",id:"-wrong-adding-rule-at-the-end",level:3},{value:"\u2705 Right: Adding rule at the beginning",id:"-right-adding-rule-at-the-beginning",level:3},{value:"\u274c Wrong: Duplicating Babel config",id:"-wrong-duplicating-babel-config",level:3},{value:"\u2705 Right: Let babel-loader find config",id:"-right-let-babel-loader-find-config",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Recently, I spent significant time debugging why Storybook wasn't processing TypeScript files correctly. The error was cryptic: ",(0,r.jsx)(n.code,{children:"Module parse failed: Unexpected token"})," when encountering ",(0,r.jsx)(n.code,{children:"import type"})," syntax. This post documents the solution and explains how the build pipeline actually works."]}),"\n",(0,r.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,r.jsxs)(n.p,{children:["When running Storybook with TypeScript files, webpack was trying to parse TypeScript syntax (like ",(0,r.jsx)(n.code,{children:"import type"}),") directly, which it cannot do. Webpack needs JavaScript, not TypeScript. The error looked like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ERROR in ./.storybook/preview.ts 1:12\nModule parse failed: Unexpected token (1:12)\n> import type { Preview } from '@storybook/react';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"the-solution-a-unified-babel-configuration",children:"The Solution: A Unified Babel Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["The key insight is that ",(0,r.jsx)(n.strong,{children:"Babel handles TypeScript transpilation"}),", and we need to ensure babel-loader runs ",(0,r.jsx)(n.strong,{children:"before"})," webpack tries to parse the files. Here's how we set it up:"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-babel-configuration-babelconfigjs",children:["1. Babel Configuration (",(0,r.jsx)(n.code,{children:"babel.config.js"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"The main Babel configuration lives at the project root and is shared between Docusaurus and Storybook:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  presets: [\n    [require.resolve('@babel/preset-typescript'), { \n      isTSX: true, \n      allExtensions: true \n    }],\n    require.resolve('@docusaurus/core/lib/babel/preset'),\n  ],\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What this does:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@babel/preset-typescript"})," - Strips TypeScript syntax (including ",(0,r.jsx)(n.code,{children:"import type"}),") and converts it to JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"@docusaurus/core/lib/babel/preset"})," - Docusaurus-specific transformations"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"2-storybook-configuration-storybookmaints",children:["2. Storybook Configuration (",(0,r.jsx)(n.code,{children:".storybook/main.ts"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Storybook needs to be told to use babel-loader for TypeScript files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"webpackFinal: async (config, { configDir }) => {\n  // ... other config ...\n  \n  // Ensure babel-loader processes TypeScript files FIRST\n  if (config.module?.rules) {\n    config.module.rules.unshift({\n      test: /\\.(ts|tsx)$/,\n      exclude: /node_modules/,\n      use: [\n        {\n          loader: require.resolve('babel-loader'),\n          // babel-loader automatically uses babel.config.js from project root\n        },\n      ],\n    });\n  }\n  \n  return config;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key points:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"unshift()"})," adds the rule at the ",(0,r.jsx)(n.strong,{children:"beginning"})," of the rules array"]}),"\n",(0,r.jsxs)(n.li,{children:["This ensures babel-loader runs ",(0,r.jsx)(n.strong,{children:"before"})," Storybook's CSF plugin"]}),"\n",(0,r.jsxs)(n.li,{children:["babel-loader automatically finds and uses ",(0,r.jsx)(n.code,{children:"babel.config.js"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-typescript-configuration-tsconfigjson",children:["3. TypeScript Configuration (",(0,r.jsx)(n.code,{children:"tsconfig.json"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["We consolidated to a single ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," that works for both Docusaurus and Storybook:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "extends": "@docusaurus/tsconfig",\n  "compilerOptions": {\n    "baseUrl": ".",\n    "module": "ESNext",\n    "moduleResolution": "bundler",\n    "allowSyntheticDefaultImports": true,\n    "isolatedModules": true\n  },\n  "include": [\n    "src/**/*",\n    ".storybook/**/*"\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"how-the-build-process-works",children:"How the Build Process Works"}),"\n",(0,r.jsxs)(n.p,{children:["Let me break down what happens when you run ",(0,r.jsx)(n.code,{children:"make storybook"}),":"]}),"\n",(0,r.jsx)(n.h3,{id:"step-by-step-execution-flow",children:"Step-by-Step Execution Flow"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant Makefile\n    participant Yarn\n    participant Storybook\n    participant Webpack\n    participant BabelLoader\n    participant Babel\n    participant CSFPlugin\n    participant Browser\n\n    User->>Makefile: make storybook\n    Makefile->>Yarn: yarn storybook\n    Yarn->>Storybook: storybook dev -p 6006\n    Storybook->>Webpack: Initialize webpack config\n    \n    Note over Webpack: Load .storybook/main.ts\n    Webpack->>Webpack: Apply webpackFinal config\n    Webpack->>Webpack: Add babel-loader rule (first)\n    \n    Storybook->>Webpack: Request .storybook/preview.ts\n    Webpack->>BabelLoader: Process .ts file\n    BabelLoader->>Babel: Load babel.config.js\n    Babel->>Babel: Apply TypeScript Preset\n    Babel--\x3e>BabelLoader: Transpiled JavaScript\n    BabelLoader--\x3e>Webpack: JavaScript code\n    \n    Webpack->>CSFPlugin: Process with CSF plugin\n    CSFPlugin--\x3e>Webpack: Processed module\n    Webpack--\x3e>Storybook: Bundle ready\n    Storybook->>Browser: Serve on localhost:6006"}),"\n",(0,r.jsx)(n.h3,{id:"the-build-pipeline-architecture",children:"The Build Pipeline Architecture"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[TypeScript Source Files] --\x3e|.ts/.tsx files| B[Webpack Entry Point]\n    B --\x3e C{Webpack Module Rules}\n    C --\x3e|First Rule| D[babel-loader]\n    D --\x3e|Reads| E[babel.config.js]\n    E --\x3e|Uses| F[Babel TypeScript Preset]\n    F --\x3e|Transpiles| G[JavaScript Code]\n    G --\x3e|Strips import type| H[Plain JavaScript]\n    H --\x3e|Next Rule| I[Storybook CSF Plugin]\n    I --\x3e|Processes| J[Story Metadata]\n    J --\x3e|Next Rule| K[Other Webpack Loaders]\n    K --\x3e|Bundles| L[Final Bundle]\n    L --\x3e|Serves| M[Browser]\n    \n    style D fill:#f9f,stroke:#333,stroke-width:2px\n    style E fill:#bbf,stroke:#333,stroke-width:2px\n    style F fill:#bfb,stroke:#333,stroke-width:2px\n    style H fill:#fbf,stroke:#333,stroke-width:2px"}),"\n",(0,r.jsx)(n.h2,{id:"understanding-typescript-and-babel-a-laymans-guide",children:"Understanding TypeScript and Babel: A Layman's Guide"}),"\n",(0,r.jsx)(n.p,{children:"Before we dive into the technical details, let's understand what these tools actually do in simple terms."}),"\n",(0,r.jsx)(n.h3,{id:"what-is-typescript",children:"What is TypeScript?"}),"\n",(0,r.jsxs)(n.p,{children:["Think of TypeScript as a ",(0,r.jsx)(n.strong,{children:"safety net"})," for JavaScript. When you write JavaScript, you can accidentally do things like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'function add(a, b) {\n  return a + b;\n}\n\nadd("hello", 5); // Returns "hello5" - probably not what you wanted!\n'})}),"\n",(0,r.jsxs)(n.p,{children:["TypeScript lets you add ",(0,r.jsx)(n.strong,{children:"type annotations"})," to catch these mistakes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'function add(a: number, b: number): number {\n  return a + b;\n}\n\nadd("hello", 5); // \u274c Error: "hello" is not a number!\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Point"}),": TypeScript is like a spell-checker for your code. It checks for errors ",(0,r.jsx)(n.strong,{children:"before"})," your code runs, but it doesn't actually run your code. The type information is like comments that help developers and tools understand the code better."]}),"\n",(0,r.jsx)(n.h3,{id:"what-is-babel",children:"What is Babel?"}),"\n",(0,r.jsxs)(n.p,{children:["Babel is like a ",(0,r.jsx)(n.strong,{children:"translator"}),". Imagine you wrote a book in modern English, but you need to publish it in a language that older readers can understand. Babel does something similar for code:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"You write"}),": Modern JavaScript with TypeScript types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel reads it"}),": Understands the modern syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel translates"}),": Converts it to older JavaScript that browsers can run"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel removes"}),": All the TypeScript type annotations (they're not needed at runtime)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Here's what Babel does:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// What you write (TypeScript):\nfunction greet(name: string): string {\n  return `Hello, ${name}!`;\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// What Babel produces (JavaScript):\nfunction greet(name) {\n  return "Hello, " + name + "!";\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Notice that:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:": string"})," type annotations are ",(0,r.jsx)(n.strong,{children:"removed"})," (they were just for checking)"]}),"\n",(0,r.jsx)(n.li,{children:"The template string is converted to regular string concatenation (for older browser support)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Point"}),": Babel ",(0,r.jsx)(n.strong,{children:"transpiles"})," (transforms + compiles) your code. It doesn't check types - it just converts syntax."]}),"\n",(0,r.jsx)(n.h3,{id:"how-they-work-together",children:"How They Work Together"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A[You Write TypeScript] --\x3e|Type Checking| B[TypeScript Compiler]\n    B --\x3e|Finds Type Errors| C[IDE Shows Errors]\n    A --\x3e|Transpilation| D[Babel]\n    D --\x3e|Removes Types| E[Plain JavaScript]\n    E --\x3e|Runs in Browser| F[Your App Works]\n    \n    style B fill:#ffcccc,stroke:#333,stroke-width:2px\n    style D fill:#ccffcc,stroke:#333,stroke-width:2px\n    style E fill:#ccccff,stroke:#333,stroke-width:2px"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"The Flow:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"You write TypeScript"})," \u2192 TypeScript checks for type errors (in your IDE)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel transpiles"})," \u2192 Removes types and converts to JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Browser runs"})," \u2192 The JavaScript executes"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": TypeScript and Babel have different jobs:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TypeScript"}),': "Is this code correct?" (type checking)']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel"}),': "Can I convert this to runnable JavaScript?" (transpilation)']}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"the-complete-picture-from-source-to-browser",children:"The Complete Picture: From Source to Browser"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[Developer Writes Code] --\x3e|TypeScript with Types| B[TypeScript Compiler]\n    B --\x3e|Type Checking| C{Types Valid?}\n    C --\x3e|No| D[Show Error in IDE]\n    C --\x3e|Yes| E[Source Code Ready]\n    E --\x3e|.ts/.tsx files| F[Babel Transpiler]\n    F --\x3e|Reads babel.config.js| G[Applies Transformations]\n    G --\x3e|Removes Types| H[Plain JavaScript]\n    G --\x3e|Converts Syntax| H\n    H --\x3e|.js files| I[Webpack Bundler]\n    I --\x3e|Combines Files| J[Single Bundle]\n    J --\x3e|Optimizes| K[Minified Bundle]\n    K --\x3e|Serves| L[Browser]\n    L --\x3e|Runs| M[Your App Works!]\n    \n    style B fill:#ffcccc,stroke:#333,stroke-width:2px\n    style F fill:#ccffcc,stroke:#333,stroke-width:2px\n    style I fill:#ffffcc,stroke:#333,stroke-width:2px"}),"\n",(0,r.jsx)(n.h2,{id:"laymans-guide-to-all-tools",children:"Layman's Guide to All Tools"}),"\n",(0,r.jsx)(n.p,{children:"Here's a simple explanation of every tool in our stack, using everyday analogies:"}),"\n",(0,r.jsx)(n.h3,{id:"the-writing-tools-development",children:"The Writing Tools (Development)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"TypeScript"})," (",(0,r.jsx)(n.code,{children:"tsconfig.json"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a grammar checker for code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Checks if your code makes sense before you run it"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": Catches mistakes like trying to add a number to a word"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": While you're writing code (in your editor)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Babel"})," (",(0,r.jsx)(n.code,{children:"babel.config.js"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a translator that converts modern language to older language"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Converts your modern TypeScript/JavaScript to code that old browsers can understand"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": Converts ",(0,r.jsx)(n.code,{children:"const x = 5"})," to ",(0,r.jsx)(n.code,{children:"var x = 5"})," for older browsers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During the build process"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"babel-loader"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a worker who takes files to Babel and brings back the translated version"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Connects Webpack (the build system) to Babel (the translator)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),': "Hey Babel, translate this TypeScript file for me"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During the build process, for each file"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"the-assembly-line-build-system",children:"The Assembly Line (Build System)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Webpack"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a factory assembly line that takes raw materials and creates a finished product"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Takes all your code files, processes them through various tools, and bundles them into files the browser can use"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": Combines 100 small files into 3 optimized files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During the build process"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storybook CSF Plugin"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a specialized worker on the assembly line who handles component documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Processes Storybook story files to extract component information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": Reads your component stories and creates the Storybook UI"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During the build process, after Babel has converted TypeScript"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"the-presentation-tools-development-environment",children:"The Presentation Tools (Development Environment)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storybook"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a showroom where you can see and test individual components"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Creates an isolated environment to develop and test React components"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": Shows your button component in different states (clicked, hovered, disabled)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": When you start the Storybook development server"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Docusaurus"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a website builder for documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Takes your Markdown files and creates a beautiful documentation website"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Example"}),": Converts this blog post from Markdown to HTML"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": When you build or start the documentation site"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"the-configuration-files",children:"The Configuration Files"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"babel.config.js"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a recipe card for Babel"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Tells Babel how to translate your code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Contains"}),': Instructions like "remove TypeScript types" and "convert modern JavaScript"']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"tsconfig.json"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a style guide for TypeScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Tells TypeScript how strict to be and what rules to follow"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Contains"}),': Settings like "check all files" and "allow modern JavaScript features"']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:".storybook/main.ts"})})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analogy"}),": Like a blueprint for Storybook"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),": Tells Storybook where to find stories and how to build them"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Contains"}),': Instructions like "use babel-loader for TypeScript files"']}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-they-all-work-together-the-complete-picture",children:"How They All Work Together: The Complete Picture"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[You Write Code] --\x3e|TypeScript Files| B[TypeScript Checks Types]\n    B --\x3e|Valid Code| C[Webpack Starts Building]\n    C --\x3e|Finds .ts files| D[babel-loader]\n    D --\x3e|Reads| E[babel.config.js]\n    E --\x3e|Uses Presets| F[Babel Transpiles]\n    F --\x3e|Removes Types| G[JavaScript Files]\n    G --\x3e|Processes| H[CSF Plugin]\n    H --\x3e|Extracts Stories| I[Storybook UI]\n    I --\x3e|Bundles| J[Webpack Creates Bundle]\n    J --\x3e|Serves| K[Browser Shows Storybook]\n    \n    style B fill:#ffcccc,stroke:#333,stroke-width:2px\n    style D fill:#ccffcc,stroke:#333,stroke-width:2px\n    style F fill:#ccffcc,stroke:#333,stroke-width:2px\n    style J fill:#ffffcc,stroke:#333,stroke-width:2px"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"The Journey:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"You write"})," TypeScript code with types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TypeScript checks"})," if the types are correct (catches errors early)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webpack starts"})," the build process"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"babel-loader"})," takes each TypeScript file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel reads"})," ",(0,r.jsx)(n.code,{children:"babel.config.js"})," to know how to translate"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel removes"})," all the type annotations (they're not needed at runtime)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel converts"})," modern syntax to compatible JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CSF Plugin"})," processes the JavaScript to extract Storybook stories"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webpack bundles"})," everything into optimized files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Browser loads"})," and runs the final JavaScript"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-toolchain-what-each-component-does",children:"The Toolchain: What Each Component Does"}),"\n",(0,r.jsx)(n.p,{children:"Before diving into the build process, let's understand each tool in the stack:"}),"\n",(0,r.jsx)(n.h3,{id:"core-build-tools",children:"Core Build Tools"}),"\n",(0,r.jsxs)(n.h4,{id:"1-typescript-tsconfigjson",children:["1. ",(0,r.jsx)(n.strong,{children:"TypeScript"})," (",(0,r.jsx)(n.code,{children:"tsconfig.json"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Type system and developer experience"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provides static type checking"}),"\n",(0,r.jsx)(n.li,{children:"Enables IDE autocomplete and IntelliSense"}),"\n",(0,r.jsx)(n.li,{children:"Catches type errors before runtime"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": TypeScript does NOT compile code - it only checks types"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration"}),": ",(0,r.jsx)(n.code,{children:"tsconfig.json"})," defines compiler options and project structure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During development (IDE) and optionally during build (type checking)"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"2-babel-babelconfigjs--babel-loader",children:["2. ",(0,r.jsx)(n.strong,{children:"Babel"})," (",(0,r.jsx)(n.code,{children:"babel.config.js"})," + ",(0,r.jsx)(n.code,{children:"babel-loader"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": JavaScript transpiler and transformer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transpiles"})," TypeScript syntax \u2192 JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:["Strips type annotations (",(0,r.jsx)(n.code,{children:"import type"}),", ",(0,r.jsx)(n.code,{children:": Type"}),", etc.)"]}),"\n",(0,r.jsx)(n.li,{children:"Converts modern JavaScript to compatible versions"}),"\n",(0,r.jsx)(n.li,{children:"Transforms JSX to JavaScript"}),"\n",(0,r.jsx)(n.li,{children:"Applies code transformations (plugins)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration"}),": ",(0,r.jsx)(n.code,{children:"babel.config.js"})," defines presets and plugins"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": At build time via ",(0,r.jsx)(n.code,{children:"babel-loader"})," in webpack"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Key insight"}),": Babel is the bridge between TypeScript source and webpack's JavaScript requirement"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"3-webpack",children:["3. ",(0,r.jsx)(n.strong,{children:"Webpack"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Module bundler and build orchestrator"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Orchestrates the entire build process"}),"\n",(0,r.jsx)(n.li,{children:"Manages module resolution and dependencies"}),"\n",(0,r.jsx)(n.li,{children:"Processes files through loaders (transformations)"}),"\n",(0,r.jsx)(n.li,{children:"Bundles everything into optimized output files"}),"\n",(0,r.jsx)(n.li,{children:"Handles code splitting and optimization"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration"}),": ",(0,r.jsx)(n.code,{children:".storybook/main.ts"})," (webpackFinal function)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During build/development server startup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Key limitation"}),": Webpack only understands JavaScript - it needs loaders to process other file types"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"4-babel-loader",children:["4. ",(0,r.jsx)(n.strong,{children:"babel-loader"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Webpack loader that runs Babel"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Acts as a bridge between webpack and Babel"}),"\n",(0,r.jsxs)(n.li,{children:["Processes ",(0,r.jsx)(n.code,{children:".ts"}),"/",(0,r.jsx)(n.code,{children:".tsx"})," files through Babel"]}),"\n",(0,r.jsxs)(n.li,{children:["Automatically finds and uses ",(0,r.jsx)(n.code,{children:"babel.config.js"})]}),"\n",(0,r.jsx)(n.li,{children:"Returns JavaScript that webpack can understand"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration"}),": Defined in webpack rules"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During webpack's module processing phase"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"development-tools",children:"Development Tools"}),"\n",(0,r.jsxs)(n.h4,{id:"5-storybook",children:["5. ",(0,r.jsx)(n.strong,{children:"Storybook"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Component development and documentation environment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provides isolated component development environment"}),"\n",(0,r.jsx)(n.li,{children:"Renders components in different states (stories)"}),"\n",(0,r.jsx)(n.li,{children:"Generates interactive documentation"}),"\n",(0,r.jsx)(n.li,{children:"Uses webpack under the hood for bundling"}),"\n",(0,r.jsx)(n.li,{children:"Adds Storybook-specific loaders (CSF plugin, etc.)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration"}),": ",(0,r.jsx)(n.code,{children:".storybook/main.ts"})," and ",(0,r.jsx)(n.code,{children:".storybook/preview.ts"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": Development server (",(0,r.jsx)(n.code,{children:"yarn storybook"}),") or build (",(0,r.jsx)(n.code,{children:"yarn build-storybook"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"6-storybook-csf-plugin",children:["6. ",(0,r.jsx)(n.strong,{children:"Storybook CSF Plugin"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Processes Storybook story files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Parses ",(0,r.jsx)(n.code,{children:".stories.tsx"})," files"]}),"\n",(0,r.jsx)(n.li,{children:"Extracts story metadata"}),"\n",(0,r.jsx)(n.li,{children:"Generates story exports"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requires"}),": JavaScript input (not TypeScript)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": After babel-loader has transpiled TypeScript"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"7-docusaurus",children:["7. ",(0,r.jsx)(n.strong,{children:"Docusaurus"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Documentation and blog platform"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it does"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Generates static documentation site"}),"\n",(0,r.jsx)(n.li,{children:"Processes Markdown and MDX files"}),"\n",(0,r.jsx)(n.li,{children:"Uses the same Babel configuration as Storybook"}),"\n",(0,r.jsx)(n.li,{children:"Provides the blog where this post lives!"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration"}),": ",(0,r.jsx)(n.code,{children:"docusaurus.config.js"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When it runs"}),": During site build or development server"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,r.jsxs)(n.h4,{id:"8-babelconfigjs",children:["8. ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"babel.config.js"})})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Central Babel configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it contains"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Presets (TypeScript, Docusaurus)"}),"\n",(0,r.jsx)(n.li,{children:"Plugins (transformations)"}),"\n",(0,r.jsx)(n.li,{children:"Shared by Docusaurus and Storybook"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": Project root"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"9-tsconfigjson",children:["9. ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"tsconfig.json"})})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": TypeScript compiler configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it contains"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compiler options (module system, target, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Path mappings"}),"\n",(0,r.jsx)(n.li,{children:"Include/exclude patterns"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": Project root (shared)"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"10-storybookmaints",children:["10. ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:".storybook/main.ts"})})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose"}),": Storybook configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"What it contains"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Story file patterns"}),"\n",(0,r.jsx)(n.li,{children:"Addon configuration"}),"\n",(0,r.jsx)(n.li,{children:"Webpack customization (webpackFinal)"}),"\n",(0,r.jsx)(n.li,{children:"Babel configuration"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:".storybook/"})," directory"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"tool-interaction-summary",children:"Tool Interaction Summary"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A[TypeScript Source] --\x3e|Type Checking| B[tsconfig.json]\n    A --\x3e|Transpilation| C[babel-loader]\n    C --\x3e|Reads Config| D[babel.config.js]\n    D --\x3e|Uses Presets| E[Babel TypeScript Preset]\n    E --\x3e|Outputs| F[JavaScript]\n    F --\x3e|Processes| G[Webpack]\n    G --\x3e|Uses Loaders| H[CSF Plugin]\n    H --\x3e|Bundles| I[Storybook Bundle]\n    I --\x3e|Serves| J[Browser]\n    \n    K[Docusaurus] --\x3e|Also Uses| D\n    K --\x3e|Also Uses| B\n    \n    style D fill:#bbf,stroke:#333,stroke-width:3px\n    style C fill:#f9f,stroke:#333,stroke-width:2px\n    style G fill:#bfb,stroke:#333,stroke-width:2px"}),"\n",(0,r.jsx)(n.h2,{id:"understanding-the-dependencies",children:"Understanding the Dependencies"}),"\n",(0,r.jsx)(n.h3,{id:"tool-responsibilities",children:"Tool Responsibilities"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["TypeScript (",(0,r.jsx)(n.code,{children:"tsconfig.json"}),")"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provides type checking (when enabled)"}),"\n",(0,r.jsx)(n.li,{children:"IDE support and autocomplete"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Does NOT compile code"})," - that's Babel's job"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Babel (",(0,r.jsx)(n.code,{children:"babel.config.js"})," + ",(0,r.jsx)(n.code,{children:"babel-loader"}),")"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transpiles"})," TypeScript \u2192 JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:["Strips type annotations (",(0,r.jsx)(n.code,{children:"import type"}),", ",(0,r.jsx)(n.code,{children:": Type"}),", etc.)"]}),"\n",(0,r.jsx)(n.li,{children:"Applies transformations (JSX, modern syntax, etc.)"}),"\n",(0,r.jsxs)(n.li,{children:["Runs ",(0,r.jsx)(n.strong,{children:"at build time"})," via webpack"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Webpack"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Orchestrates the build process"}),"\n",(0,r.jsx)(n.li,{children:"Manages module resolution"}),"\n",(0,r.jsx)(n.li,{children:"Bundles everything together"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Does NOT understand TypeScript"})," - needs babel-loader"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storybook"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provides the development environment"}),"\n",(0,r.jsx)(n.li,{children:"Uses webpack under the hood"}),"\n",(0,r.jsx)(n.li,{children:"Adds Storybook-specific loaders (CSF plugin, etc.)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"why-order-matters",children:"Why Order Matters"}),"\n",(0,r.jsxs)(n.p,{children:["The webpack loader chain executes in ",(0,r.jsx)(n.strong,{children:"reverse order"})," (right to left), but rules are processed ",(0,r.jsx)(n.strong,{children:"top to bottom"}),". By using ",(0,r.jsx)(n.code,{children:"unshift()"}),", we ensure:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"babel-loader runs first"})," \u2192 TypeScript becomes JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CSF plugin runs second"})," \u2192 Processes the JavaScript"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Other loaders run"})," \u2192 Final processing"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If babel-loader runs after the CSF plugin, the plugin tries to parse TypeScript syntax and fails."}),"\n",(0,r.jsx)(n.h2,{id:"the-complete-setup",children:"The Complete Setup"}),"\n",(0,r.jsx)(n.p,{children:"Here's what we ended up with:"}),"\n",(0,r.jsx)(n.h3,{id:"file-structure",children:"File Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"bytesofpurpose-blog/\n\u251c\u2500\u2500 babel.config.js          # Shared Babel config (Docusaurus + Storybook)\n\u251c\u2500\u2500 tsconfig.json            # Shared TypeScript config\n\u251c\u2500\u2500 .storybook/\n\u2502   \u251c\u2500\u2500 main.ts              # Storybook webpack config\n\u2502   \u2514\u2500\u2500 preview.ts           # Storybook preview config\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 **/*.stories.tsx     # Story files\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-files-1",children:"Configuration Files"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"babel.config.js"})})," - The single source of truth for transpilation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  presets: [\n    [require.resolve('@babel/preset-typescript'), { \n      isTSX: true, \n      allExtensions: true \n    }],\n    require.resolve('@docusaurus/core/lib/babel/preset'),\n  ],\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:".storybook/main.ts"})})," - Minimal webpack configuration:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"webpackFinal: async (config) => {\n  // Add babel-loader rule FIRST\n  config.module.rules.unshift({\n    test: /\\.(ts|tsx)$/,\n    exclude: /node_modules/,\n    use: [{ loader: require.resolve('babel-loader') }],\n  });\n  return config;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Babel transpiles, TypeScript types"})," - TypeScript provides types, Babel removes them"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Webpack needs JavaScript"})," - It can't parse TypeScript directly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loader order matters"})," - babel-loader must run before other loaders"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unified config is better"})," - One ",(0,r.jsx)(n.code,{children:"babel.config.js"})," for the whole project"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No pre-compilation needed"})," - babel-loader handles it on-the-fly"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,r.jsx)(n.h3,{id:"-wrong-adding-rule-at-the-end",children:"\u274c Wrong: Adding rule at the end"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"config.module.rules.push({ ... }); // Runs AFTER other rules\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-right-adding-rule-at-the-beginning",children:"\u2705 Right: Adding rule at the beginning"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"config.module.rules.unshift({ ... }); // Runs BEFORE other rules\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-wrong-duplicating-babel-config",children:"\u274c Wrong: Duplicating Babel config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Don't duplicate presets in webpack config\nloader: require.resolve('babel-loader'),\noptions: {\n  presets: [...], // \u274c Already in babel.config.js\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"-right-let-babel-loader-find-config",children:"\u2705 Right: Let babel-loader find config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// babel-loader automatically uses babel.config.js\nloader: require.resolve('babel-loader'),\n// No options needed!\n"})}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["Understanding how TypeScript, Babel, and Webpack work together is crucial for debugging build issues. The key insight is that ",(0,r.jsx)(n.strong,{children:"Babel is the bridge"})," between TypeScript source code and webpack's JavaScript requirements. By ensuring babel-loader runs first in the webpack pipeline, we maintain a clean, unified build process that works for both Docusaurus and Storybook."]}),"\n",(0,r.jsx)(n.p,{children:"The setup is now simple and maintainable:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["One ",(0,r.jsx)(n.code,{children:"babel.config.js"})," for the entire project"]}),"\n",(0,r.jsx)(n.li,{children:"Minimal webpack configuration in Storybook"}),"\n",(0,r.jsx)(n.li,{children:"No pre-compilation step needed"}),"\n",(0,r.jsx)(n.li,{children:"Everything works seamlessly together"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://storybook.js.org/docs/configure/typescript",children:"Storybook TypeScript Configuration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://babeljs.io/docs/en/babel-preset-typescript",children:"Babel TypeScript Preset"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://webpack.js.org/concepts/loaders/",children:"Webpack Loaders"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://storybook.js.org/docs/builders/webpack",children:"Storybook Webpack Configuration"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>t});var i=s(96540);const r={},l=i.createContext(r);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(l.Provider,{value:n},e.children)}},34192:e=>{e.exports=JSON.parse('{"permalink":"/blog/storybook-typescript-babel-setup","editUrl":"https://github.com/omars-lab/omars-lab.github.io/edit/master/bytesofpurpose-blog/blog/blog/2025-11-16-storybook-typescript-babel-setup.md","source":"@site/blog/2025-11-16-storybook-typescript-babel-setup.md","title":"\ud83d\udd27 Storybook + TypeScript + Babel: Understanding the Build Pipeline","description":"A deep dive into configuring Storybook with TypeScript and Babel, explaining how webpack, babel-loader, and TypeScript work together in the build process.","date":"2025-11-16T10:00:00.000Z","tags":[{"inline":true,"label":"storybook","permalink":"/blog/tags/storybook"},{"inline":true,"label":"typescript","permalink":"/blog/tags/typescript"},{"inline":true,"label":"babel","permalink":"/blog/tags/babel"},{"inline":true,"label":"webpack","permalink":"/blog/tags/webpack"},{"inline":true,"label":"build-systems","permalink":"/blog/tags/build-systems"},{"inline":true,"label":"frontend","permalink":"/blog/tags/frontend"}],"readingTime":13.8,"hasTruncateMarker":true,"authors":[{"name":"Omar Eid","title":"Software Engineer","url":"https://github.com/omars-lab","imageURL":"https://github.com/omars-lab.png","key":"oeid","page":null}],"frontMatter":{"slug":"storybook-typescript-babel-setup","title":"\ud83d\udd27 Storybook + TypeScript + Babel: Understanding the Build Pipeline","description":"A deep dive into configuring Storybook with TypeScript and Babel, explaining how webpack, babel-loader, and TypeScript work together in the build process.","authors":["oeid"],"tags":["storybook","typescript","babel","webpack","build-systems","frontend"],"date":"2025-11-16T10:00","draft":false},"unlisted":false,"nextItem":{"title":"\ud83d\ude80 My Contributions","permalink":"/blog/my-contributions"}}')}}]);