"use strict";(globalThis.webpackChunkbytesofpurpose_blog=globalThis.webpackChunkbytesofpurpose_blog||[]).push([[39646],{991:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"techniques/development-techniques/tool-composition-techniques/storybook-typescript-babel/setup-overview","title":"\ud83d\udd27 Storybook + TypeScript + Babel: Setup Guide","description":"A practical guide to setting up Storybook with TypeScript and Babel. Learn the high-level approach and why this configuration matters.","source":"@site/docs/6-techniques/5-development-techniques/tool-composition-techniques/storybook-typescript-babel/setup-overview.mdx","sourceDirName":"6-techniques/5-development-techniques/tool-composition-techniques/storybook-typescript-babel","slug":"/techniques/development-techniques/tool-composition-techniques/storybook-typescript-babel/setup-overview","permalink":"/docs/techniques/development-techniques/tool-composition-techniques/storybook-typescript-babel/setup-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/omars-lab/omars-lab.github.io/edit/master/bytesofpurpose-blog/docs/6-techniques/5-development-techniques/tool-composition-techniques/storybook-typescript-babel/setup-overview.mdx","tags":[{"inline":true,"label":"storybook","permalink":"/docs/tags/storybook"},{"inline":true,"label":"typescript","permalink":"/docs/tags/typescript"},{"inline":true,"label":"babel","permalink":"/docs/tags/babel"},{"inline":true,"label":"webpack","permalink":"/docs/tags/webpack"},{"inline":true,"label":"build-systems","permalink":"/docs/tags/build-systems"},{"inline":true,"label":"frontend","permalink":"/docs/tags/frontend"},{"inline":true,"label":"setup","permalink":"/docs/tags/setup"}],"version":"current","frontMatter":{"title":"\ud83d\udd27 Storybook + TypeScript + Babel: Setup Guide","description":"A practical guide to setting up Storybook with TypeScript and Babel. Learn the high-level approach and why this configuration matters.","authors":["oeid"],"tags":["storybook","typescript","babel","webpack","build-systems","frontend","setup"],"slug":"setup-overview"},"sidebar":"changelogSidebar","previous":{"title":"\ud83d\udd27 Storybook + TypeScript + Babel: Development Process & Experience","permalink":"/docs/techniques/development-techniques/tool-composition-techniques/storybook-typescript-babel/development-process"},"next":{"title":"\ud83d\udd27 Storybook + TypeScript + Babel: Understanding the Tools","permalink":"/docs/techniques/development-techniques/tool-composition-techniques/storybook-typescript-babel/understanding-tools"}}');var i=s(74848),t=s(28453);const r={title:"\ud83d\udd27 Storybook + TypeScript + Babel: Setup Guide",description:"A practical guide to setting up Storybook with TypeScript and Babel. Learn the high-level approach and why this configuration matters.",authors:["oeid"],tags:["storybook","typescript","babel","webpack","build-systems","frontend","setup"],slug:"setup-overview"},l=void 0,c={},a=[{value:"Questions Answered by This Post",id:"questions-answered-by-this-post",level:2},{value:"Why This Setup Matters",id:"why-this-setup-matters",level:2},{value:"1. <strong>Unified Configuration</strong>",id:"1-unified-configuration",level:3},{value:"2. <strong>No Pre-compilation Needed</strong>",id:"2-no-pre-compilation-needed",level:3},{value:"3. <strong>Clean Separation of Concerns</strong>",id:"3-clean-separation-of-concerns",level:3},{value:"4. <strong>Better Developer Experience</strong>",id:"4-better-developer-experience",level:3},{value:"The Approach: A Unified Babel Configuration",id:"the-approach-a-unified-babel-configuration",level:2},{value:"The Setup",id:"the-setup",level:2},{value:"1. Babel Configuration (<code>babel.config.js</code>)",id:"1-babel-configuration-babelconfigjs",level:3},{value:"2. Storybook Configuration (<code>.storybook/main.ts</code>)",id:"2-storybook-configuration-storybookmaints",level:3},{value:"3. TypeScript Configuration (<code>tsconfig.json</code>)",id:"3-typescript-configuration-tsconfigjson",level:3},{value:"The Complete Setup",id:"the-complete-setup",level:2},{value:"File Structure",id:"file-structure",level:3},{value:"Configuration Files",id:"configuration-files",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"questions-answered-by-this-post",children:"Questions Answered by This Post"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"How do I set up Storybook to work with TypeScript files?"}),"\n",(0,i.jsx)(n.li,{children:"What's the high-level approach to configuring Babel with Storybook?"}),"\n",(0,i.jsx)(n.li,{children:"Why does webpack fail when processing TypeScript files directly?"}),"\n",(0,i.jsx)(n.li,{children:"What's the minimal configuration needed to get Storybook + TypeScript working?"}),"\n",(0,i.jsx)(n.li,{children:"Why should I use a unified Babel configuration?"}),"\n",(0,i.jsx)(n.li,{children:"What value does this setup provide?"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This guide provides a practical setup for configuring Storybook with TypeScript and Babel. You'll learn the high-level approach and why this configuration matters for your development workflow."}),"\n",(0,i.jsx)(n.h2,{id:"why-this-setup-matters",children:"Why This Setup Matters"}),"\n",(0,i.jsx)(n.p,{children:"When working with Storybook and TypeScript, you need a way to convert TypeScript to JavaScript before webpack processes it. Here's why this setup is valuable:"}),"\n",(0,i.jsxs)(n.h3,{id:"1-unified-configuration",children:["1. ",(0,i.jsx)(n.strong,{children:"Unified Configuration"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["One ",(0,i.jsx)(n.code,{children:"babel.config.js"})," for the entire project"]}),"\n",(0,i.jsx)(n.li,{children:"Works for both Docusaurus and Storybook"}),"\n",(0,i.jsx)(n.li,{children:"Easier to maintain and understand"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"2-no-pre-compilation-needed",children:["2. ",(0,i.jsx)(n.strong,{children:"No Pre-compilation Needed"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"babel-loader handles transpilation on-the-fly"}),"\n",(0,i.jsx)(n.li,{children:"No separate build step required"}),"\n",(0,i.jsx)(n.li,{children:"Faster development workflow"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"3-clean-separation-of-concerns",children:["3. ",(0,i.jsx)(n.strong,{children:"Clean Separation of Concerns"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"TypeScript handles type checking (in your IDE)"}),"\n",(0,i.jsx)(n.li,{children:"Babel handles transpilation (at build time)"}),"\n",(0,i.jsx)(n.li,{children:"Webpack handles bundling"}),"\n",(0,i.jsx)(n.li,{children:"Each tool does what it's best at"}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"4-better-developer-experience",children:["4. ",(0,i.jsx)(n.strong,{children:"Better Developer Experience"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Type safety during development"}),"\n",(0,i.jsx)(n.li,{children:"Fast build times"}),"\n",(0,i.jsx)(n.li,{children:"Clear error messages"}),"\n",(0,i.jsx)(n.li,{children:"Works seamlessly with modern tooling"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-approach-a-unified-babel-configuration",children:"The Approach: A Unified Babel Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["The key insight is that ",(0,i.jsx)(n.strong,{children:"Babel handles TypeScript transpilation"}),", and we need to ensure babel-loader runs ",(0,i.jsx)(n.strong,{children:"before"})," webpack tries to parse the files. Here's the high-level approach:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Babel transpiles TypeScript to JavaScript"})," - Babel removes type annotations and converts TypeScript syntax to JavaScript"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"babel-loader runs first"})," - We configure webpack to process TypeScript files through babel-loader before other loaders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unified configuration"})," - One ",(0,i.jsx)(n.code,{children:"babel.config.js"})," shared between Docusaurus and Storybook"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-setup",children:"The Setup"}),"\n",(0,i.jsxs)(n.h3,{id:"1-babel-configuration-babelconfigjs",children:["1. Babel Configuration (",(0,i.jsx)(n.code,{children:"babel.config.js"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"The main Babel configuration lives at the project root and is shared between Docusaurus and Storybook:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  presets: [\n    [require.resolve('@babel/preset-typescript'), { \n      isTSX: true, \n      allExtensions: true \n    }],\n    require.resolve('@docusaurus/core/lib/babel/preset'),\n  ],\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What this does:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@babel/preset-typescript"})," - Strips TypeScript syntax (including ",(0,i.jsx)(n.code,{children:"import type"}),") and converts it to JavaScript"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@docusaurus/core/lib/babel/preset"})," - Docusaurus-specific transformations"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"2-storybook-configuration-storybookmaints",children:["2. Storybook Configuration (",(0,i.jsx)(n.code,{children:".storybook/main.ts"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Storybook needs to be told to use babel-loader for TypeScript files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"webpackFinal: async (config, { configDir }) => {\n  // ... other config ...\n  \n  // Ensure babel-loader processes TypeScript files FIRST\n  if (config.module?.rules) {\n    config.module.rules.unshift({\n      test: /\\.(ts|tsx)$/,\n      exclude: /node_modules/,\n      use: [\n        {\n          loader: require.resolve('babel-loader'),\n          // babel-loader automatically uses babel.config.js from project root\n        },\n      ],\n    });\n  }\n  \n  return config;\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key points:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"unshift()"})," adds the rule at the ",(0,i.jsx)(n.strong,{children:"beginning"})," of the rules array"]}),"\n",(0,i.jsxs)(n.li,{children:["This ensures babel-loader runs ",(0,i.jsx)(n.strong,{children:"before"})," Storybook's CSF plugin"]}),"\n",(0,i.jsxs)(n.li,{children:["babel-loader automatically finds and uses ",(0,i.jsx)(n.code,{children:"babel.config.js"})]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"3-typescript-configuration-tsconfigjson",children:["3. TypeScript Configuration (",(0,i.jsx)(n.code,{children:"tsconfig.json"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["We consolidated to a single ",(0,i.jsx)(n.code,{children:"tsconfig.json"})," that works for both Docusaurus and Storybook:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "extends": "@docusaurus/tsconfig",\n  "compilerOptions": {\n    "baseUrl": ".",\n    "module": "ESNext",\n    "moduleResolution": "bundler",\n    "allowSyntheticDefaultImports": true,\n    "isolatedModules": true\n  },\n  "include": [\n    "src/**/*",\n    ".storybook/**/*"\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"the-complete-setup",children:"The Complete Setup"}),"\n",(0,i.jsx)(n.p,{children:"Here's what we ended up with:"}),"\n",(0,i.jsx)(n.h3,{id:"file-structure",children:"File Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bytesofpurpose-blog/\n\u251c\u2500\u2500 babel.config.js          # Shared Babel config (Docusaurus + Storybook)\n\u251c\u2500\u2500 tsconfig.json            # Shared TypeScript config\n\u251c\u2500\u2500 .storybook/\n\u2502   \u251c\u2500\u2500 main.ts              # Storybook webpack config\n\u2502   \u2514\u2500\u2500 preview.ts           # Storybook preview config\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 **/*.stories.tsx     # Story files\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"babel.config.js"})})," - The single source of truth for transpilation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  presets: [\n    [require.resolve('@babel/preset-typescript'), { \n      isTSX: true, \n      allExtensions: true \n    }],\n    require.resolve('@docusaurus/core/lib/babel/preset'),\n  ],\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:".storybook/main.ts"})})," - Minimal webpack configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"webpackFinal: async (config) => {\n  // Add babel-loader rule FIRST\n  config.module.rules.unshift({\n    test: /\\.(ts|tsx)$/,\n    exclude: /node_modules/,\n    use: [{ loader: require.resolve('babel-loader') }],\n  });\n  return config;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Babel transpiles, TypeScript types"})," - TypeScript provides types, Babel removes them"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Webpack needs JavaScript"})," - It can't parse TypeScript directly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Loader order matters"})," - babel-loader must run before other loaders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unified config is better"})," - One ",(0,i.jsx)(n.code,{children:"babel.config.js"})," for the whole project"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No pre-compilation needed"})," - babel-loader handles it on-the-fly"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For ",(0,i.jsx)(n.strong,{children:"understanding the tools"})," and their responsibilities, see ",(0,i.jsx)(n.a,{href:"./understanding-tools",children:"Understanding the Tools"})]}),"\n",(0,i.jsxs)(n.li,{children:["For ",(0,i.jsx)(n.strong,{children:"the development process and build flow"}),", see ",(0,i.jsx)(n.a,{href:"./development-process",children:"Development Process & Experience"})]}),"\n",(0,i.jsxs)(n.li,{children:["For ",(0,i.jsx)(n.strong,{children:"common pitfalls and debugging tips"}),", see ",(0,i.jsx)(n.a,{href:"./common-pitfalls",children:"Common Pitfalls & Issues"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://storybook.js.org/docs/configure/typescript",children:"Storybook TypeScript Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://babeljs.io/docs/en/babel-preset-typescript",children:"Babel TypeScript Preset"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://webpack.js.org/concepts/loaders/",children:"Webpack Loaders"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://storybook.js.org/docs/builders/webpack",children:"Storybook Webpack Configuration"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var o=s(96540);const i={},t=o.createContext(i);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);