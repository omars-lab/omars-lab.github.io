---
slug: graph
title: 'Graph Renderer Component'
description: 'Interactive force-directed graph component with hierarchical nodes, zoom controls, and anchor link support.'
authors: [oeid]
tags: [docusaurus, react, components, graph, visualization]
draft: false
---

import GraphRenderer from '@site/src/components/Graph/GraphRenderer';
import NodeRendererDemo from '@site/src/components/Graph/NodeRendererDemo';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Graph Renderer Component

The `GraphRenderer` component is an interactive, force-directed graph visualization built on top of D3.js force simulation. It supports hierarchical node structures, dynamic expansion/collapse, zoom controls, anchor links, and dark mode.

## NodeRenderer: Title Display Examples

The `NodeRenderer` class handles all node rendering, including sophisticated title display with automatic truncation and ellipsis handling. Below are examples showcasing how titles are rendered at different lengths and zoom levels.

### Short Titles (â‰¤20 characters)

Short titles are displayed in full without truncation:

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="Short" zoomLevel={1.0} />
  <NodeRendererDemo title="Short Title" zoomLevel={1.0} />
  <NodeRendererDemo title="A Short Node Title" zoomLevel={1.0} />
</div>

### Medium Titles (21-40 characters)

Medium titles may be truncated or wrapped across multiple lines:

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="This is a medium length title" zoomLevel={1.0} />
  <NodeRendererDemo title="A Medium Length Node Title Here" zoomLevel={1.0} />
  <NodeRendererDemo title="Medium Title That Needs Wrapping" zoomLevel={1.0} />
</div>

### Long Titles (>40 characters)

Long titles are truncated to ensure at least 20 characters are shown before the ellipsis:

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="This is a very long title that exceeds the maximum character limit" zoomLevel={1.0} />
  <NodeRendererDemo title="A Very Long Node Title That Will Definitely Be Truncated With Ellipsis" zoomLevel={1.0} />
  <NodeRendererDemo title="Extremely Long Title That Demonstrates The Ellipsis Mechanism Perfectly" zoomLevel={1.0} />
</div>

### Zoom Level Effects

The same title at different zoom levels. Notice how the text scales reactively while maintaining the 20-character minimum before ellipsis:

#### Short Title at Different Zoom Levels

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="Short Title" zoomLevel={0.5} />
  <NodeRendererDemo title="Short Title" zoomLevel={1.0} />
  <NodeRendererDemo title="Short Title" zoomLevel={1.5} />
  <NodeRendererDemo title="Short Title" zoomLevel={2.0} />
</div>

#### Medium Title at Different Zoom Levels

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="This is a medium length title" zoomLevel={0.5} />
  <NodeRendererDemo title="This is a medium length title" zoomLevel={1.0} />
  <NodeRendererDemo title="This is a medium length title" zoomLevel={1.5} />
  <NodeRendererDemo title="This is a medium length title" zoomLevel={2.0} />
</div>

#### Long Title at Different Zoom Levels

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="This is a very long title that exceeds the maximum character limit" zoomLevel={0.5} />
  <NodeRendererDemo title="This is a very long title that exceeds the maximum character limit" zoomLevel={1.0} />
  <NodeRendererDemo title="This is a very long title that exceeds the maximum character limit" zoomLevel={1.5} />
  <NodeRendererDemo title="This is a very long title that exceeds the maximum character limit" zoomLevel={2.0} />
</div>

### Parent vs Leaf Nodes

Parent nodes (with children) are larger and show expansion arrows, while leaf nodes are smaller and show a leaf emoji:

<div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center', margin: '20px 0' }}>
  <NodeRendererDemo title="Parent Node" zoomLevel={1.0} isParent={true} />
  <NodeRendererDemo title="Leaf Node" zoomLevel={1.0} isParent={false} />
  <NodeRendererDemo title="Long Parent Node Title" zoomLevel={1.0} isParent={true} />
  <NodeRendererDemo title="Long Leaf Node Title" zoomLevel={1.0} isParent={false} />
</div>

### Key Features Demonstrated

- **20-Character Minimum**: When ellipsis is shown, at least 20 characters of text are displayed before it
- **Reactive Scaling**: Text scales with zoom level while staying within node boundaries
- **Multi-line Support**: Long titles are distributed across up to 3 lines
- **Canvas Clipping**: Text never protrudes outside the circular node shape
- **Smart Truncation**: Ellipsis only appears when necessary, never alone

## Features

- **Hierarchical Nodes**: Support for nested node structures with expand/collapse functionality
- **Interactive Navigation**: Click to expand/collapse, zoom with mouse wheel, pan by dragging
- **Anchor Links**: Deep linking to specific nodes via URL hashes
- **Node Highlighting**: Visual highlighting with golden glow for selected nodes
- **Smart Title Display**: Automatic text truncation (20 chars) with ellipsis, distributed across 3 lines
- **Dark Mode Support**: Automatically adapts to Docusaurus theme
- **Context Menu**: Right-click nodes/edges to copy anchor links
- **Side Panel**: View node/edge details on hover or click
- **Edge Labels**: Display labels on graph edges
- **Status Indicators**: Visual indicators for leaf nodes (ðŸŒ¿) and expandable nodes (â–¶/â–¼)
- **Zoom Limits**: Intelligent zoom constraints to prevent over-zooming

## Basic Usage

### Simple Graph

A basic graph with two nodes and a link:

<GraphRenderer data={{
  nodes: [
    { id: '1', label: 'Node A', title: 'Node A Title' },
    { id: '2', label: 'Node B', title: 'Node B Title' }
  ],
  links: [
    { source: '1', target: '2' }
  ]
}} />

```jsx
<GraphRenderer data={{
  nodes: [
    { id: '1', label: 'Node A', title: 'Node A Title' },
    { id: '2', label: 'Node B', title: 'Node B Title' }
  ],
  links: [
    { source: '1', target: '2' }
  ]
}} />
```

## Component API

### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `data` | `GraphData` | **required** | Graph data containing nodes and links |
| `width` | `number` | `800` | Graph width in pixels |
| `height` | `number` | `600` | Graph height in pixels |
| `graphId` | `string` | `'graph'` | Unique ID for anchor link support |
| `highlightNodeId` | `string` | `undefined` | Node ID to highlight programmatically |
| `highlightEdgeId` | `string` | `undefined` | Edge ID to highlight programmatically |

### Data Structure

#### Node

```typescript
interface Node {
  id: string;              // Unique identifier (required)
  label: string;           // Display label (required)
  title?: string;          // Title text (displayed in node, max 20 chars)
  description?: string;    // Description (shown in side panel)
  color?: string;          // Node color (hex format)
  group?: number;          // Group number (for color assignment)
  children?: Node[];       // Child nodes (for hierarchical structure)
}
```

#### Link

```typescript
interface Link {
  source: string;          // Source node ID (required)
  target: string;          // Target node ID (required)
  value?: number;          // Link weight (affects thickness)
  label?: string;          // Edge label text
  id?: string;             // Unique edge ID (for highlighting)
}
```

## Feature Examples

### Hierarchical Nodes with Expand/Collapse

Nodes can have children that are hidden by default. Click on a parent node to expand and reveal its children. Click again to collapse.

**Visual Indicators:**
- **Parent nodes** (with children): Larger size (12px radius), show `â–¶` when collapsed, `â–¼` when expanded
- **Leaf nodes** (no children): Smaller size (8px radius), show `ðŸŒ¿` emoji

<GraphRenderer 
  graphId="hierarchical-example"
  data={{
    nodes: [
      { 
        id: 'root', 
        label: 'Root', 
        title: 'Root Node',
        color: '#68BDF6',
        children: [
          { 
            id: 'level1-a', 
            label: 'Level 1-A', 
            title: 'First Level Node A',
            color: '#60BE86',
            children: [
              { 
                id: 'level2-a1', 
                label: 'Level 2-A1', 
                title: 'Second Level Node A1',
                color: '#FF6B6B',
                children: [
                  { id: 'level3-a1a', label: 'Level 3-A1a', title: 'Third Level Node A1a', color: '#FFD93D' },
                  { id: 'level3-a1b', label: 'Level 3-A1b', title: 'Third Level Node A1b', color: '#FFD93D' }
                ]
              },
              { id: 'level2-a2', label: 'Level 2-A2', title: 'Second Level Node A2', color: '#FF6B6B' }
            ]
          },
          { 
            id: 'level1-b', 
            label: 'Level 1-B', 
            title: 'First Level Node B',
            color: '#60BE86',
            children: [
              { id: 'level2-b1', label: 'Level 2-B1', title: 'Second Level Node B1', color: '#FF6B6B' },
              { id: 'level2-b2', label: 'Level 2-B2', title: 'Second Level Node B2', color: '#FF6B6B' }
            ]
          },
          { 
            id: 'level1-c', 
            label: 'Level 1-C', 
            title: 'First Level Node C (No Children)',
            color: '#60BE86'
          }
        ]
      }
    ],
    links: []
  }} 
/>

**Try it:**
1. Click on "Root" to expand and see Level 1 nodes
2. Click on "Level 1-A" to expand and see Level 2 nodes
3. Click on "Level 2-A1" to expand and see Level 3 nodes
4. Click again on any expanded node to collapse it

### Title Display

Node titles are automatically:
- **Truncated to 20 characters** with ellipsis (`...`) if longer
- **Distributed across up to 3 lines** within the node
- **Scaled reactively** with zoom level to always fit within node boundaries
- **Never protrude** outside the circular node shape

**Examples:**
- Short title: "Root Node" â†’ displayed as-is
- Medium title: "First Level Node A" â†’ displayed as-is (18 chars)
- Long title: "First Level Node C (No Children)" â†’ truncated to "First Level Node ..." (20 chars)

### Anchor Links and Node Highlighting

Create deep links to specific nodes using URL hashes. When a link is clicked, the graph will:
1. **Automatically expand** all parent nodes to make the target visible
2. **Highlight** the target node with a golden glow and border
3. **Center and zoom** the view on the highlighted node
4. **Update the URL** hash for shareable links

**Link Format:** `#graphId-node-{nodeId}`

**Example Links:**
- [Highlight Level 2-A1](#hierarchical-example-node-level2-a1)
- [Highlight Level 3-A1a](#hierarchical-example-node-level3-a1a)
- [Highlight Level 1-C](#hierarchical-example-node-level1-c)

```jsx
// In your MDX file, create links like this:
[Highlight Node](#hierarchical-example-node-level2-a1)

// Or programmatically:
<GraphRenderer 
  graphId="my-graph"
  highlightNodeId="level2-a1"
  data={...}
/>
```

### Edge Labels

Edges can have labels displayed at their midpoint:

<GraphRenderer data={{
  nodes: [
    { id: 'a', label: 'Node A', title: 'Source' },
    { id: 'b', label: 'Node B', title: 'Target' },
    { id: 'c', label: 'Node C', title: 'Another' }
  ],
  links: [
    { source: 'a', target: 'b', label: 'connects to', id: 'link-ab' },
    { source: 'b', target: 'c', label: 'related to', id: 'link-bc' }
  ]
}} />

```jsx
links: [
  { 
    source: 'a', 
    target: 'b', 
    label: 'connects to',
    id: 'link-ab'  // Optional: for highlighting
  }
]
```

### Custom Colors

Assign custom colors to nodes:

<GraphRenderer data={{
  nodes: [
    { id: '1', label: 'Blue Node', title: 'Blue', color: '#68BDF6' },
    { id: '2', label: 'Green Node', title: 'Green', color: '#60BE86' },
    { id: '3', label: 'Red Node', title: 'Red', color: '#FF6B6B' },
    { id: '4', label: 'Purple Node', title: 'Purple', color: '#A78BFA' }
  ],
  links: [
    { source: '1', target: '2' },
    { source: '2', target: '3' },
    { source: '3', target: '4' }
  ]
}} />

If no color is specified, nodes use a default Neo4j-inspired color palette.

### Node Descriptions

Add descriptions that appear in the side panel when hovering or clicking a node:

```jsx
nodes: [
  { 
    id: '1', 
    label: 'Node A', 
    title: 'Node A Title',
    description: 'This is a detailed description that appears in the side panel when you hover or click on the node.'
  }
]
```

## Interactive Controls

### Menu Bar

The graph includes a menu bar with the following controls:

- **Center**: Centers the view on all visible nodes
- **Expand All**: Expands all nodes with children
- **Collapse All**: Collapses all expanded nodes
- **Hide/Show Pane**: Toggles the side panel visibility

### Mouse Interactions

- **Left Click Node**: 
  - If node has children: Toggle expand/collapse
  - Always: Select node and show details in side panel
- **Right Click Node/Edge**: Open context menu to copy anchor link
- **Mouse Wheel**: Zoom in/out (with intelligent limits)
- **Drag**: Pan the graph view
- **Hover Node**: Show node details in side panel

### Zoom Behavior

The graph enforces intelligent zoom limits:
- **Zoom Out Limit**: Prevents zooming out so far that the graph becomes less than 25% of viewport
- **Zoom In Limit**: Prevents zooming in so far that a single node takes up more than 90% of viewport
- **Reactive Text**: Text scales appropriately with zoom level while staying within node boundaries

## Advanced Example

Here's a comprehensive example showcasing multiple features:

<GraphRenderer 
  graphId="advanced-example"
  data={{
    nodes: [
      { 
        id: 'root', 
        label: 'Root', 
        title: 'Root Node',
        description: 'This is the root node with multiple children',
        color: '#68BDF6',
        children: [
          { 
            id: 'level1-a', 
            label: 'Level 1-A', 
            title: 'First Level Node A',
            description: 'A first-level child node',
            color: '#60BE86',
            children: [
              { 
                id: 'level2-a1', 
                label: 'Level 2-A1', 
                title: 'Second Level Node A1',
                color: '#FF6B6B',
                children: [
                  { id: 'level3-a1a', label: 'Level 3-A1a', title: 'Third Level Node A1a', color: '#FFD93D' },
                  { id: 'level3-a1b', label: 'Level 3-A1b', title: 'Third Level Node A1b', color: '#FFD93D' }
                ]
              },
              { id: 'level2-a2', label: 'Level 2-A2', title: 'Second Level Node A2', color: '#FF6B6B' }
            ]
          },
          { 
            id: 'level1-b', 
            label: 'Level 1-B', 
            title: 'First Level Node B',
            color: '#60BE86',
            children: [
              { id: 'level2-b1', label: 'Level 2-B1', title: 'Second Level Node B1', color: '#FF6B6B' },
              { id: 'level2-b2', label: 'Level 2-B2', title: 'Second Level Node B2', color: '#FF6B6B' }
            ]
          },
          { 
            id: 'level1-c', 
            label: 'Level 1-C', 
            title: 'First Level Node C (No Children)',
            color: '#60BE86'
          }
        ]
      },
      { 
        id: 'sibling', 
        label: 'Sibling', 
        title: 'Sibling Root Node',
        color: '#A78BFA',
        children: [
          { id: 'sibling-child1', label: 'Sibling Child 1', title: 'Sibling First Child', color: '#FB7185' },
          { id: 'sibling-child2', label: 'Sibling Child 2', title: 'Sibling Second Child', color: '#FB7185' }
        ]
      }
    ],
    links: [
      { source: 'root', target: 'sibling', label: 'related to' }
    ]
  }} 
/>

**Try these features:**
1. **Expand nodes**: Click on nodes with `â–¶` to expand
2. **Use anchor links**: [Highlight Level 2-A1](#advanced-example-node-level2-a1)
3. **Right-click**: Right-click any node to copy its anchor link
4. **Zoom**: Use mouse wheel to zoom in/out
5. **Pan**: Click and drag to move the graph
6. **View details**: Hover or click nodes to see details in the side panel

## Technical Details

### Title Display Logic

The component implements sophisticated text rendering:

- **Character Limit**: Titles are truncated to exactly 20 characters (17 chars + `...` if longer)
- **Line Distribution**: Text is distributed across up to 3 lines within the node
- **Word Breaking**: Attempts to break at word boundaries when possible
- **Ellipsis Handling**: Ellipsis always appears at the end, never alone
- **Reactive Scaling**: Font size adjusts with zoom level to maintain readability
- **Boundary Enforcement**: Canvas clipping ensures text never protrudes outside node circle
- **Width Constraints**: Text width accounts for circular node shape (narrower at top/bottom)

### Node Sizing

- **Parent nodes** (with children): 12px radius
- **Leaf nodes** (no children): 8px radius

### Color Palette

Default colors (Neo4j-inspired):
- `#68BDF6` - Neo4j blue
- `#60BE86` - Green
- `#FF6B6B` - Red
- `#FFD93D` - Yellow
- `#A78BFA` - Purple
- `#FB7185` - Pink
- `#34D399` - Emerald
- `#FBBF24` - Amber

## Best Practices

1. **Use unique `graphId`**: When using multiple graphs on the same page, give each a unique `graphId`
2. **Keep titles concise**: Titles are limited to 20 characters; use descriptions for longer text
3. **Provide descriptions**: Add descriptions to nodes for better context in the side panel
4. **Use anchor links**: Create shareable links to specific nodes using the anchor link format
5. **Organize hierarchically**: Use the `children` property to create logical node hierarchies
6. **Customize colors**: Use the `color` property to create visual groupings

## Troubleshooting

### Text not displaying
- Check that nodes have a `title` or `label` property
- Verify the title is not empty after trimming

### Nodes not expanding
- Ensure parent nodes have a `children` array with at least one child
- Check that child nodes have unique `id` values

### Anchor links not working
- Verify the `graphId` prop matches the hash format: `#graphId-node-{nodeId}`
- Ensure the target node exists in the graph data
- Check that parent nodes are being expanded correctly

### Zoom not working
- The graph enforces zoom limits; try zooming in smaller increments
- Check browser console for any errors
